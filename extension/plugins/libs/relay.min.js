/*!
 * Relay SDK for JavaScript v1.1.2 (https://signalwire.com)
 * Copyright 2018-2019 SignalWire
 * Licensed under MIT(https://github.com/signalwire/signalwire-node/blob/master/LICENSE)
 */
! function(e, t) {
    for (var n in t) e[n] = t[n]
}(this, function(e) {
    var t = {};

    function n(r) {
        if (t[r]) return t[r].exports;
        var o = t[r] = {
            i: r,
            l: !1,
            exports: {}
        };
        return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports
    }
    return n.m = e, n.c = t, n.d = function(e, t, r) {
        n.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: r
        })
    }, n.r = function(e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }, n.t = function(e, t) {
        if (1 & t && (e = n(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var r = Object.create(null);
        if (n.r(r), Object.defineProperty(r, "default", {
                enumerable: !0,
                value: e
            }), 2 & t && "string" != typeof e)
            for (var o in e) n.d(r, o, function(t) {
                return e[t]
            }.bind(null, o));
        return r
    }, n.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default
        } : function() {
            return e
        };
        return n.d(t, "a", t), t
    }, n.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, n.p = "", n(n.s = 72)
}([function(e, t) {
    var n = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
    "number" == typeof __g && (__g = n)
}, function(e, t, n) {
    var r = n(38)("wks"),
        o = n(24),
        i = n(0).Symbol,
        s = "function" == typeof i;
    (e.exports = function(e) {
        return r[e] || (r[e] = s && i[e] || (s ? i : o)("Symbol." + e))
    }).store = r
}, function(e, t) {
    var n = e.exports = {
        version: "2.6.9"
    };
    "number" == typeof __e && (__e = n)
}, function(e, t, n) {
    "use strict";
    var r = this && this.__read || function(e, t) {
            var n = "function" == typeof Symbol && e[Symbol.iterator];
            if (!n) return e;
            var r, o, i = n.call(e),
                s = [];
            try {
                for (;
                    (void 0 === t || t-- > 0) && !(r = i.next()).done;) s.push(r.value)
            } catch (e) {
                o = {
                    error: e
                }
            } finally {
                try {
                    r && !r.done && (n = i.return) && n.call(i)
                } finally {
                    if (o) throw o.error
                }
            }
            return s
        },
        o = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = o(n(4)),
        s = n(5);
    t.objEmpty = function(e) {
        return 0 === Object.keys(e).length
    }, t.mutateStorageKey = function(e) {
        return "" + s.STORAGE_PREFIX + e
    }, t.mutateLiveArrayData = function(e) {
        var t = r(e, 6),
            n = t[0],
            o = t[1],
            s = t[2],
            a = t[3],
            c = t[4],
            u = t[5],
            l = {};
        try {
            l = JSON.parse(c.replace(/ID"/g, 'Id"'))
        } catch (e) {
            i.default.warn("Verto LA invalid media JSON string:", c)
        }
        return {
            participantId: Number(n),
            participantNumber: o,
            participantName: s,
            codec: a,
            media: l,
            participantData: u
        }
    }, t.safeParseJson = function(e) {
        if ("string" != typeof e) return e;
        try {
            return JSON.parse(e)
        } catch (t) {
            return e
        }
    }, t.isDefined = function(e) {
        return void 0 !== e
    }, t.isFunction = function(e) {
        return e instanceof Function || "function" == typeof e
    }, t.findElementByType = function(e) {
        return "object" == typeof document && "getElementById" in document ? "string" == typeof e ? document.getElementById(e) || null : "function" == typeof e ? e() : e instanceof HTMLMediaElement ? e : null : null
    };
    var a = /^(ws|wss):\/\//;
    t.checkWebSocketHost = function(e) {
        return "" + (a.test(e) ? "" : "wss://") + e
    }, t.destructResponse = function(e, n) {
        void 0 === n && (n = null);
        var r = e.result,
            o = void 0 === r ? {} : r,
            i = e.error;
        if (i) return {
            error: i
        };
        var s = o.result,
            a = void 0 === s ? null : s;
        if (null === a) return null !== n && (o.node_id = n), {
            result: o
        };
        var c = a.code,
            u = void 0 === c ? null : c,
            l = a.node_id,
            f = void 0 === l ? null : l,
            d = a.result,
            p = void 0 === d ? null : d;
        return u && "200" !== u ? {
            error: a
        } : p ? t.destructResponse(p, f) : {
            result: a
        }
    }
}, function(e, t, n) {
    "use strict";
    var r = this && this.__importStar || function(e) {
        if (e && e.__esModule) return e;
        var t = {};
        if (null != e)
            for (var n in e) Object.hasOwnProperty.call(e, n) && (t[n] = e[n]);
        return t.default = e, t
    };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = r(n(86)),
        i = function() {
            return (new Date).toISOString().replace("T", " ").replace("Z", "")
        },
        s = o.getLogger("signalwire"),
        a = s.methodFactory;
    s.methodFactory = function(e, t, n) {
        var r = a(e, t, n);
        return function() {
            for (var e = [i(), "-"], t = 0; t < arguments.length; t++) e.push(arguments[t]);
            r.apply(void 0, e)
        }
    }, s.setLevel(s.getLevel()), t.default = s
}, function(e, t, n) {
    "use strict";
    var r, o;
    Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        function(e) {
            e.ProtocolProviderAdd = "protocol.provider.add", e.ProtocolProviderRemove = "protocol.provider.remove"
        }(t.Netcast || (t.Netcast = {})), t.STORAGE_PREFIX = "@signalwire:", t.ADD = "add", t.REMOVE = "remove", t.SESSION_ID = "sessId",
        function(e) {
            e.SocketOpen = "signalwire.socket.open", e.SocketClose = "signalwire.socket.close", e.SocketError = "signalwire.socket.error", e.SocketMessage = "signalwire.socket.message", e.SpeedTest = "signalwire.internal.speedtest", e.Ready = "signalwire.ready", e.Error = "signalwire.error", e.Notification = "signalwire.notification", e.Messages = "signalwire.messages", e.Calls = "signalwire.calls", e.MediaError = "signalwire.rtc.mediaError"
        }(t.SwEvent || (t.SwEvent = {})),
        function(e) {
            e.Offer = "offer", e.Answer = "answer"
        }(t.PeerType || (t.PeerType = {})),
        function(e) {
            e.Inbound = "inbound", e.Outbound = "outbound"
        }(t.Direction || (t.Direction = {})),
        function(e) {
            e.Invite = "verto.invite", e.Attach = "verto.attach", e.Answer = "verto.answer", e.Info = "verto.info", e.Display = "verto.display", e.Media = "verto.media", e.Event = "verto.event", e.Bye = "verto.bye", e.Punt = "verto.punt", e.Broadcast = "verto.broadcast", e.Subscribe = "verto.subscribe", e.Unsubscribe = "verto.unsubscribe", e.ClientReady = "verto.clientReady", e.Modify = "verto.modify"
        }(o = t.VertoMethod || (t.VertoMethod = {})), t.NOTIFICATION_TYPE = ((r = {
            generic: "event"
        })[o.Display] = "participantData", r[o.Attach] = "participantData", r.conferenceUpdate = "conferenceUpdate", r.callUpdate = "callUpdate", r.vertoClientReady = "vertoClientReady", r.userMediaError = "userMediaError", r.refreshToken = "refreshToken", r),
        function(e) {
            e.Netcast = "blade.netcast", e.Broadcast = "blade.broadcast", e.Disconnect = "blade.disconnect"
        }(t.BladeMethod || (t.BladeMethod = {}))
}, function(e, t, n) {
    var r = n(7);
    e.exports = function(e) {
        if (!r(e)) throw TypeError(e + " is not an object!");
        return e
    }
}, function(e, t) {
    e.exports = function(e) {
        return "object" == typeof e ? null !== e : "function" == typeof e
    }
}, function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = n(3),
        o = {},
        i = function(e, t) {
            return void 0 === t && (t = "GLOBAL"), o.hasOwnProperty(e) && o[e].hasOwnProperty(t)
        };
    t.isQueued = i;
    t.queueLength = function(e, t) {
        return void 0 === t && (t = "GLOBAL"), i(e, t) ? o[e][t].length : 0
    };
    var s = function(e, t, n) {
        void 0 === n && (n = "GLOBAL"), o.hasOwnProperty(e) || (o[e] = {}), o[e].hasOwnProperty(n) || (o[e][n] = []), o[e][n].push(t)
    };
    t.register = s;
    t.registerOnce = function(e, t, n) {
        void 0 === n && (n = "GLOBAL");
        var r = function(o) {
            a(e, r, n), t(o)
        };
        return r.prototype.targetRef = t, s(e, r, n)
    };
    var a = function(e, t, n) {
        if (void 0 === n && (n = "GLOBAL"), !i(e, n)) return !1;
        if (r.isFunction(t))
            for (var s = o[e][n].length - 1; s >= 0; s--) {
                var a = o[e][n][s];
                (t === a || a.prototype && t === a.prototype.targetRef) && o[e][n].splice(s, 1)
            } else o[e][n] = [];
        return 0 === o[e][n].length && (delete o[e][n], r.objEmpty(o[e]) && delete o[e]), !0
    };
    t.deRegister = a;
    var c = function(e, t, n, r) {
        void 0 === n && (n = "GLOBAL"), void 0 === r && (r = !0);
        var s = r && "GLOBAL" !== n;
        if (!i(e, n)) return s && c(e, t), !1;
        var a = o[e][n].length;
        if (!a) return s && c(e, t), !1;
        for (var u = a - 1; u >= 0; u--) o[e][n][u](t);
        return s && c(e, t), !0
    };
    t.trigger = c;
    t.deRegisterAll = function(e) {
        delete o[e]
    }
}, function(e, t, n) {
    var r = n(0),
        o = n(2),
        i = n(16),
        s = n(10),
        a = n(13),
        c = function(e, t, n) {
            var u, l, f, d = e & c.F,
                p = e & c.G,
                h = e & c.S,
                v = e & c.P,
                y = e & c.B,
                b = e & c.W,
                _ = p ? o : o[t] || (o[t] = {}),
                g = _.prototype,
                m = p ? r : h ? r[t] : (r[t] || {}).prototype;
            for (u in p && (n = t), n)(l = !d && m && void 0 !== m[u]) && a(_, u) || (f = l ? m[u] : n[u], _[u] = p && "function" != typeof m[u] ? n[u] : y && l ? i(f, r) : b && m[u] == f ? function(e) {
                var t = function(t, n, r) {
                    if (this instanceof e) {
                        switch (arguments.length) {
                            case 0:
                                return new e;
                            case 1:
                                return new e(t);
                            case 2:
                                return new e(t, n)
                        }
                        return new e(t, n, r)
                    }
                    return e.apply(this, arguments)
                };
                return t.prototype = e.prototype, t
            }(f) : v && "function" == typeof f ? i(Function.call, f) : f, v && ((_.virtual || (_.virtual = {}))[u] = f, e & c.R && g && !g[u] && s(g, u, f)))
        };
    c.F = 1, c.G = 2, c.S = 4, c.P = 8, c.B = 16, c.W = 32, c.U = 64, c.R = 128, e.exports = c
}, function(e, t, n) {
    var r = n(11),
        o = n(23);
    e.exports = n(12) ? function(e, t, n) {
        return r.f(e, t, o(1, n))
    } : function(e, t, n) {
        return e[t] = n, e
    }
}, function(e, t, n) {
    var r = n(6),
        o = n(48),
        i = n(32),
        s = Object.defineProperty;
    t.f = n(12) ? Object.defineProperty : function(e, t, n) {
        if (r(e), t = i(t, !0), r(n), o) try {
            return s(e, t, n)
        } catch (e) {}
        if ("get" in n || "set" in n) throw TypeError("Accessors not supported!");
        return "value" in n && (e[t] = n.value), e
    }
}, function(e, t, n) {
    e.exports = !n(22)(function() {
        return 7 != Object.defineProperty({}, "a", {
            get: function() {
                return 7
            }
        }).a
    })
}, function(e, t) {
    var n = {}.hasOwnProperty;
    e.exports = function(e, t) {
        return n.call(e, t)
    }
}, function(e, t, n) {
    var r = n(77),
        o = n(35);
    e.exports = function(e) {
        return r(o(e))
    }
}, function(e, t, n) {
    "use strict";
    var r = this && this.__awaiter || function(e, t, n, r) {
            return new(n || (n = Promise))(function(o, i) {
                function s(e) {
                    try {
                        c(r.next(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function a(e) {
                    try {
                        c(r.throw(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function c(e) {
                    e.done ? o(e.value) : new n(function(t) {
                        t(e.value)
                    }).then(s, a)
                }
                c((r = r.apply(e, t || [])).next())
            })
        },
        o = this && this.__generator || function(e, t) {
            var n, r, o, i, s = {
                label: 0,
                sent: function() {
                    if (1 & o[0]) throw o[1];
                    return o[1]
                },
                trys: [],
                ops: []
            };
            return i = {
                next: a(0),
                throw: a(1),
                return: a(2)
            }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                return this
            }), i;

            function a(i) {
                return function(a) {
                    return function(i) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; s;) try {
                            if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;
                            switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {
                                case 0:
                                case 1:
                                    o = i;
                                    break;
                                case 4:
                                    return s.label++, {
                                        value: i[1],
                                        done: !1
                                    };
                                case 5:
                                    s.label++, r = i[1], i = [0];
                                    continue;
                                case 7:
                                    i = s.ops.pop(), s.trys.pop();
                                    continue;
                                default:
                                    if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                        s = 0;
                                        continue
                                    }
                                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                        s.label = i[1];
                                        break
                                    }
                                    if (6 === i[0] && s.label < o[1]) {
                                        s.label = o[1], o = i;
                                        break
                                    }
                                    if (o && s.label < o[2]) {
                                        s.label = o[2], s.ops.push(i);
                                        break
                                    }
                                    o[2] && s.ops.pop(), s.trys.pop();
                                    continue
                            }
                            i = t.call(e, s)
                        } catch (e) {
                            i = [6, e], r = 0
                        } finally {
                            n = o = 0
                        }
                        if (5 & i[0]) throw i[1];
                        return {
                            value: i[0] ? i[1] : void 0,
                            done: !0
                        }
                    }([i, a])
                }
            }
        },
        i = this;
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = n(3);
    t.RTCPeerConnection = function(e) {
        return new window.RTCPeerConnection(e)
    };
    t.getUserMedia = function(e) {
        return navigator.mediaDevices.getUserMedia(e)
    };
    t.getDisplayMedia = function(e) {
        return navigator.mediaDevices.getDisplayMedia(e)
    };
    t.enumerateDevices = function() {
        return navigator.mediaDevices.enumerateDevices()
    };
    t.getSupportedConstraints = function() {
        return navigator.mediaDevices.getSupportedConstraints()
    };
    var a = function(e) {
        return e && e instanceof MediaStream
    };
    t.streamIsValid = a;
    t.attachMediaStream = function(e, t) {
        var n = s.findElementByType(e);
        null !== n && (n.getAttribute("autoplay") || n.setAttribute("autoplay", "autoplay"), n.getAttribute("playsinline") || n.setAttribute("playsinline", "playsinline"), n.srcObject = t)
    };
    t.detachMediaStream = function(e) {
        var t = s.findElementByType(e);
        t && (t.srcObject = null)
    };
    t.muteMediaElement = function(e) {
        var t = s.findElementByType(e);
        t && (t.muted = !0)
    };
    t.unmuteMediaElement = function(e) {
        var t = s.findElementByType(e);
        t && (t.muted = !1)
    };
    t.toggleMuteMediaElement = function(e) {
        var t = s.findElementByType(e);
        t && (t.muted = !t.muted)
    };
    t.setMediaElementSinkId = function(e, t) {
        return r(i, void 0, void 0, function() {
            var n;
            return o(this, function(r) {
                switch (r.label) {
                    case 0:
                        if (null === (n = s.findElementByType(e))) return [2, !1];
                        r.label = 1;
                    case 1:
                        return r.trys.push([1, 3, , 4]), [4, n.setSinkId(t)];
                    case 2:
                        return r.sent(), [2, !0];
                    case 3:
                        return r.sent(), [2, !1];
                    case 4:
                        return [2]
                }
            })
        })
    };
    t.sdpToJsonHack = function(e) {
        return e
    };
    t.stopStream = function(e) {
        a(e) && e.getTracks().forEach(function(e) {
            return e.stop()
        }), e = null
    }
}, function(e, t, n) {
    var r = n(21);
    e.exports = function(e, t, n) {
        if (r(e), void 0 === t) return e;
        switch (n) {
            case 1:
                return function(n) {
                    return e.call(t, n)
                };
            case 2:
                return function(n, r) {
                    return e.call(t, n, r)
                };
            case 3:
                return function(n, r, o) {
                    return e.call(t, n, r, o)
                }
        }
        return function() {
            return e.apply(t, arguments)
        }
    }
}, function(e, t) {
    var n = {}.toString;
    e.exports = function(e) {
        return n.call(e).slice(8, -1)
    }
}, function(e, t) {
    e.exports = !0
}, function(e, t, n) {
    "use strict";
    var r = this && this.__assign || function() {
        return (r = Object.assign || function(e) {
            for (var t, n = 1, r = arguments.length; n < r; n++)
                for (var o in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
            return e
        }).apply(this, arguments)
    };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = n(41),
        i = function() {
            function e() {}
            return e.prototype.buildRequest = function(e) {
                this.request = r({
                    jsonrpc: "2.0",
                    id: o.v4()
                }, e)
            }, e
        }();
    t.default = i
}, function(e, t) {
    e.exports = {}
}, function(e, t) {
    e.exports = function(e) {
        if ("function" != typeof e) throw TypeError(e + " is not a function!");
        return e
    }
}, function(e, t) {
    e.exports = function(e) {
        try {
            return !!e()
        } catch (e) {
            return !0
        }
    }
}, function(e, t) {
    e.exports = function(e, t) {
        return {
            enumerable: !(1 & e),
            configurable: !(2 & e),
            writable: !(4 & e),
            value: t
        }
    }
}, function(e, t) {
    var n = 0,
        r = Math.random();
    e.exports = function(e) {
        return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++n + r).toString(36))
    }
}, function(e, t, n) {
    "use strict";
    (function(e) {
        var r = this && this.__awaiter || function(e, t, n, r) {
                return new(n || (n = Promise))(function(o, i) {
                    function s(e) {
                        try {
                            c(r.next(e))
                        } catch (e) {
                            i(e)
                        }
                    }

                    function a(e) {
                        try {
                            c(r.throw(e))
                        } catch (e) {
                            i(e)
                        }
                    }

                    function c(e) {
                        e.done ? o(e.value) : new n(function(t) {
                            t(e.value)
                        }).then(s, a)
                    }
                    c((r = r.apply(e, t || [])).next())
                })
            },
            o = this && this.__generator || function(e, t) {
                var n, r, o, i, s = {
                    label: 0,
                    sent: function() {
                        if (1 & o[0]) throw o[1];
                        return o[1]
                    },
                    trys: [],
                    ops: []
                };
                return i = {
                    next: a(0),
                    throw: a(1),
                    return: a(2)
                }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                    return this
                }), i;

                function a(i) {
                    return function(a) {
                        return function(i) {
                            if (n) throw new TypeError("Generator is already executing.");
                            for (; s;) try {
                                if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;
                                switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {
                                    case 0:
                                    case 1:
                                        o = i;
                                        break;
                                    case 4:
                                        return s.label++, {
                                            value: i[1],
                                            done: !1
                                        };
                                    case 5:
                                        s.label++, r = i[1], i = [0];
                                        continue;
                                    case 7:
                                        i = s.ops.pop(), s.trys.pop();
                                        continue;
                                    default:
                                        if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                            s = 0;
                                            continue
                                        }
                                        if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                            s.label = i[1];
                                            break
                                        }
                                        if (6 === i[0] && s.label < o[1]) {
                                            s.label = o[1], o = i;
                                            break
                                        }
                                        if (o && s.label < o[2]) {
                                            s.label = o[2], s.ops.push(i);
                                            break
                                        }
                                        o[2] && s.ops.pop(), s.trys.pop();
                                        continue
                                }
                                i = t.call(e, s)
                            } catch (e) {
                                i = [6, e], r = 0
                            } finally {
                                n = o = 0
                            }
                            if (5 & i[0]) throw i[1];
                            return {
                                value: i[0] ? i[1] : void 0,
                                done: !0
                            }
                        }([i, a])
                    }
                }
            },
            i = this;
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var s = n(3),
            a = function() {
                return "undefined" == typeof window && void 0 !== e
            },
            c = function(e, t) {
                return r(i, void 0, void 0, function() {
                    var n;
                    return o(this, function(r) {
                        return a() ? [2, null] : (n = window[e].getItem(s.mutateStorageKey(t)), [2, s.safeParseJson(n)])
                    })
                })
            },
            u = function(e, t, n) {
                return r(i, void 0, void 0, function() {
                    return o(this, function(r) {
                        return a() ? [2, null] : ("object" == typeof n && (n = JSON.stringify(n)), window[e].setItem(s.mutateStorageKey(t), n), [2])
                    })
                })
            },
            l = function(e, t) {
                return r(i, void 0, void 0, function() {
                    return o(this, function(n) {
                        return a() ? [2, null] : [2, window[e].removeItem(s.mutateStorageKey(t))]
                    })
                })
            };
        t.localStorage = {
            getItem: function(e) {
                return c("localStorage", e)
            },
            setItem: function(e, t) {
                return u("localStorage", e, t)
            },
            removeItem: function(e) {
                return l("localStorage", e)
            }
        }, t.sessionStorage = {
            getItem: function(e) {
                return c("sessionStorage", e)
            },
            setItem: function(e, t) {
                return u("sessionStorage", e, t)
            },
            removeItem: function(e) {
                return l("sessionStorage", e)
            }
        }
    }).call(this, n(93))
}, function(e, t, n) {
    "use strict";
    var r, o = this && this.__extends || (r = function(e, t) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
        }),
        i = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = i(n(27)),
        a = n(96);
    t.Login = a.Login;
    var c = n(97);
    t.Result = c.Result;
    var u = n(5),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return o(t, e), t.prototype.toString = function() {
                return u.VertoMethod.Invite
            }, t
        }(s.default);
    t.Invite = l;
    var f = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o(t, e), t.prototype.toString = function() {
            return u.VertoMethod.Answer
        }, t
    }(s.default);
    t.Answer = f;
    var d = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o(t, e), t.prototype.toString = function() {
            return u.VertoMethod.Attach
        }, t
    }(s.default);
    t.Attach = d;
    var p = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o(t, e), t.prototype.toString = function() {
            return u.VertoMethod.Bye
        }, t
    }(s.default);
    t.Bye = p;
    var h = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o(t, e), t.prototype.toString = function() {
            return u.VertoMethod.Modify
        }, t
    }(s.default);
    t.Modify = h;
    var v = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o(t, e), t.prototype.toString = function() {
            return u.VertoMethod.Info
        }, t
    }(s.default);
    t.Info = v;
    var y = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o(t, e), t.prototype.toString = function() {
            return u.VertoMethod.Broadcast
        }, t
    }(s.default);
    t.Broadcast = y;
    var b = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o(t, e), t.prototype.toString = function() {
            return u.VertoMethod.Subscribe
        }, t
    }(s.default);
    t.Subscribe = b;
    var _ = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o(t, e), t.prototype.toString = function() {
            return u.VertoMethod.Unsubscribe
        }, t
    }(s.default);
    t.Unsubscribe = _
}, function(e, t, n) {
    "use strict";
    var r, o = this && this.__extends || (r = function(e, t) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
        }),
        i = this && this.__rest || function(e, t) {
            var n = {};
            for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
            if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                var o = 0;
                for (r = Object.getOwnPropertySymbols(e); o < r.length; o++) t.indexOf(r[o]) < 0 && (n[r[o]] = e[r[o]])
            }
            return n
        },
        s = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = s(n(19)),
        c = {
            id: "callID",
            destinationNumber: "destination_number",
            remoteCallerName: "remote_caller_id_name",
            remoteCallerNumber: "remote_caller_id_number",
            callerName: "caller_id_name",
            callerNumber: "caller_id_number"
        },
        u = function(e) {
            function t(t) {
                void 0 === t && (t = {});
                var n = e.call(this) || this;
                if (t.hasOwnProperty("dialogParams")) {
                    var r = t.dialogParams,
                        o = (r.remoteSdp, r.localStream, r.remoteStream, r.onNotification, r.camId, r.micId, r.speakerId, i(r, ["remoteSdp", "localStream", "remoteStream", "onNotification", "camId", "micId", "speakerId"]));
                    for (var s in c) s && o.hasOwnProperty(s) && (o[c[s]] = o[s], delete o[s]);
                    t.dialogParams = o
                }
                return n.buildRequest({
                    method: n.toString(),
                    params: t
                }), n
            }
            return o(t, e), t
        }(a.default);
    t.default = u
}, function(e, t, n) {
    "use strict";
    var r = this && this.__awaiter || function(e, t, n, r) {
            return new(n || (n = Promise))(function(o, i) {
                function s(e) {
                    try {
                        c(r.next(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function a(e) {
                    try {
                        c(r.throw(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function c(e) {
                    e.done ? o(e.value) : new n(function(t) {
                        t(e.value)
                    }).then(s, a)
                }
                c((r = r.apply(e, t || [])).next())
            })
        },
        o = this && this.__generator || function(e, t) {
            var n, r, o, i, s = {
                label: 0,
                sent: function() {
                    if (1 & o[0]) throw o[1];
                    return o[1]
                },
                trys: [],
                ops: []
            };
            return i = {
                next: a(0),
                throw: a(1),
                return: a(2)
            }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                return this
            }), i;

            function a(i) {
                return function(a) {
                    return function(i) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; s;) try {
                            if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;
                            switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {
                                case 0:
                                case 1:
                                    o = i;
                                    break;
                                case 4:
                                    return s.label++, {
                                        value: i[1],
                                        done: !1
                                    };
                                case 5:
                                    s.label++, r = i[1], i = [0];
                                    continue;
                                case 7:
                                    i = s.ops.pop(), s.trys.pop();
                                    continue;
                                default:
                                    if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                        s = 0;
                                        continue
                                    }
                                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                        s.label = i[1];
                                        break
                                    }
                                    if (6 === i[0] && s.label < o[1]) {
                                        s.label = o[1], o = i;
                                        break
                                    }
                                    if (o && s.label < o[2]) {
                                        s.label = o[2], s.ops.push(i);
                                        break
                                    }
                                    o[2] && s.ops.pop(), s.trys.pop();
                                    continue
                            }
                            i = t.call(e, s)
                        } catch (e) {
                            i = [6, e], r = 0
                        } finally {
                            n = o = 0
                        }
                        if (5 & i[0]) throw i[1];
                        return {
                            value: i[0] ? i[1] : void 0,
                            done: !0
                        }
                    }([i, a])
                }
            }
        },
        i = this && this.__read || function(e, t) {
            var n = "function" == typeof Symbol && e[Symbol.iterator];
            if (!n) return e;
            var r, o, i = n.call(e),
                s = [];
            try {
                for (;
                    (void 0 === t || t-- > 0) && !(r = i.next()).done;) s.push(r.value)
            } catch (e) {
                o = {
                    error: e
                }
            } finally {
                try {
                    r && !r.done && (n = i.return) && n.call(i)
                } finally {
                    if (o) throw o.error
                }
            }
            return s
        },
        s = this && this.__spread || function() {
            for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(i(arguments[t]));
            return e
        },
        a = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        },
        c = this && this.__importStar || function(e) {
            if (e && e.__esModule) return e;
            var t = {};
            if (null != e)
                for (var n in e) Object.hasOwnProperty.call(e, n) && (t[n] = e[n]);
            return t.default = e, t
        },
        u = this;
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = a(n(4)),
        f = n(25),
        d = c(n(15)),
        p = n(3),
        h = n(15),
        v = function(e) {
            return r(u, void 0, void 0, function() {
                var t, n, r;
                return o(this, function(o) {
                    switch (o.label) {
                        case 0:
                            if (l.default.info("RTCService.getUserMedia", e), t = e.audio, n = e.video, !t && !n) return [2, null];
                            o.label = 1;
                        case 1:
                            return o.trys.push([1, 3, , 4]), [4, d.getUserMedia(e)];
                        case 2:
                            return [2, o.sent()];
                        case 3:
                            throw r = o.sent(), l.default.error("getUserMedia error: ", r), r;
                        case 4:
                            return [2]
                    }
                })
            })
        };
    t.getUserMedia = v;
    t.getDevices = function() {
        return r(u, void 0, void 0, function() {
            var e, t;
            return o(this, function(n) {
                switch (n.label) {
                    case 0:
                        e = {}, ["videoinput", "audioinput", "audiooutput"].map(function(t) {
                            e[t] = {}, Object.defineProperty(e[t], "toArray", {
                                value: function() {
                                    var e = this;
                                    return Object.keys(this).map(function(t) {
                                        return e[t]
                                    })
                                }
                            })
                        }), n.label = 1;
                    case 1:
                        return n.trys.push([1, 3, , 4]), [4, d.enumerateDevices()];
                    case 2:
                        return n.sent().forEach(function(t) {
                            return e.hasOwnProperty(t.kind) ? !(!t.groupId || !Object.keys(e[t.kind]).some(function(n) {
                                return e[t.kind][n].groupId == t.groupId
                            })) || void(e[t.kind][t.deviceId] = t) : (l.default.warn("Unknown device type: " + t.kind, t), !0)
                        }), [3, 4];
                    case 3:
                        return t = n.sent(), l.default.error("enumerateDevices Error", t), [3, 4];
                    case 4:
                        return [2, e]
                }
            })
        })
    };
    var y = [
        [320, 240],
        [640, 360],
        [640, 480],
        [1280, 720],
        [1920, 1080]
    ];
    t.scanResolutions = function(e) {
        return r(u, void 0, void 0, function() {
            var t, n, r, s, a, c, u, l;
            return o(this, function(o) {
                switch (o.label) {
                    case 0:
                        return t = e + "-resolutions", [4, f.localStorage.getItem(t)];
                    case 1:
                        return (n = o.sent() || []) && n.length ? [2, n] : [4, v({
                            video: {
                                deviceId: {
                                    exact: e
                                }
                            }
                        })];
                    case 2:
                        r = o.sent(), s = r.getVideoTracks()[0], a = 0, o.label = 3;
                    case 3:
                        return a < y.length ? (c = i(y[a], 2), u = c[0], l = c[1], [4, s.applyConstraints({
                            width: {
                                exact: u
                            },
                            height: {
                                exact: l
                            }
                        }).then(function() {
                            return !0
                        }).catch(function() {
                            return !1
                        })]) : [3, 6];
                    case 4:
                        o.sent() && n.push({
                            resolution: u + "x" + l,
                            width: u,
                            height: l
                        }), o.label = 5;
                    case 5:
                        return a++, [3, 3];
                    case 6:
                        return h.stopStream(r), f.localStorage.setItem(t, n), [2, n]
                }
            })
        })
    };
    t.getMediaConstraints = function(e) {
        var t = e.audio,
            n = void 0 === t || t;
        e.micId && ("boolean" == typeof n && (n = {}), n.deviceId = {
            exact: e.micId
        });
        var r = e.video,
            o = void 0 !== r && r;
        return e.camId && ("boolean" == typeof o && (o = {}), o.deviceId = {
            exact: e.camId
        }), {
            audio: n,
            video: o
        }
    };
    var b = function(e, t, n) {
        return r(u, void 0, void 0, function() {
            var r, i, s, a, c, u;
            return o(this, function(o) {
                switch (o.label) {
                    case 0:
                        return [4, d.enumerateDevices().catch(function(e) {
                            return []
                        })];
                    case 1:
                        for (r = o.sent(), i = 0; i < r.length; i++)
                            if (s = r[i], a = s.deviceId, c = s.label, u = s.kind, n === u && (e === a || t === c)) return [2, a];
                        return [2, null]
                }
            })
        })
    };
    t.assureDeviceId = b;
    t.removeUnsupportedConstraints = function(e) {
        var t = d.getSupportedConstraints();
        Object.keys(e).map(function(n) {
            t.hasOwnProperty(n) || delete e[n]
        })
    };
    t.checkDeviceIdConstraints = function(e, t, n, i) {
        return r(u, void 0, void 0, function() {
            var r, s;
            return o(this, function(o) {
                switch (o.label) {
                    case 0:
                        return r = i.deviceId, p.isDefined(r) || !e && !t ? [3, 2] : [4, b(e, t, n)];
                    case 1:
                        (s = o.sent()) && (i.deviceId = {
                            exact: s
                        }), o.label = 2;
                    case 2:
                        return [2, i]
                }
            })
        })
    };
    t.sdpStereoHack = function(e) {
        var t = e.split("\r\n"),
            n = t.findIndex(function(e) {
                return /^a=rtpmap/.test(e) && /opus\/48000/.test(e)
            });
        if (!n) return e;
        var r = function(e) {
                var t = new RegExp("a=rtpmap:(\\d+) \\w+\\/\\d+"),
                    n = e.match(t);
                return n && 2 == n.length ? n[1] : null
            }(t[n]),
            o = new RegExp("a=fmtp:" + r),
            i = t.findIndex(function(e) {
                return o.test(e)
            });
        return i >= 0 ? /stereo=1;/.test(t[i]) || (t[i] += "; stereo=1; sprop-stereo=1") : t[n] += "\r\na=fmtp:" + r + " stereo=1; sprop-stereo=1", t.join("\r\n")
    };
    var _ = function(e) {
            return /^m=audio/.test(e)
        },
        g = function(e) {
            return /^m=video/.test(e)
        };
    t.sdpMediaOrderHack = function(e, t) {
        var n = t.split("\r\n");
        if (n.findIndex(_) < n.findIndex(g)) return e;
        var r = e.split("\r\n"),
            o = r.findIndex(_),
            i = r.findIndex(g),
            a = r.slice(o, i),
            c = r.slice(i, r.length - 1),
            u = r.slice(0, o);
        return s(u, c, a, [""]).join("\r\n")
    };
    t.checkSubscribeResponse = function(e, t) {
        if (!e) return !1;
        var n = m(e),
            r = n.subscribed,
            o = n.alreadySubscribed;
        return r.includes(t) || o.includes(t)
    };
    var m = function(e) {
        var t = {
            subscribed: [],
            alreadySubscribed: [],
            unauthorized: [],
            unsubscribed: [],
            notSubscribed: []
        };
        return Object.keys(t).forEach(function(n) {
            t[n] = e[n + "Channels"] || []
        }), t
    };
    t.destructSubscribeResponse = m
}, function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
            value: !0
        }), t.DEFAULT_CALL_OPTIONS = {
            destinationNumber: "",
            remoteCallerName: "Outbound Call",
            remoteCallerNumber: "",
            callerName: "",
            callerNumber: "",
            audio: !0,
            video: !1,
            useStereo: !0,
            attach: !1,
            screenShare: !1,
            userVariables: {}
        },
        function(e) {
            e[e.New = 0] = "New", e[e.Requesting = 1] = "Requesting", e[e.Trying = 2] = "Trying", e[e.Recovering = 3] = "Recovering", e[e.Ringing = 4] = "Ringing", e[e.Answering = 5] = "Answering", e[e.Early = 6] = "Early", e[e.Active = 7] = "Active", e[e.Held = 8] = "Held", e[e.Hangup = 9] = "Hangup", e[e.Destroy = 10] = "Destroy", e[e.Purge = 11] = "Purge"
        }(t.State || (t.State = {})),
        function(e) {
            e.Participant = "participant", e.Moderator = "moderator"
        }(t.Role || (t.Role = {})),
        function(e) {
            e.Join = "join", e.Leave = "leave", e.Bootstrap = "bootstrap", e.Add = "add", e.Modify = "modify", e.Delete = "delete", e.Clear = "clear", e.ChatMessage = "chatMessage", e.LayerInfo = "layerInfo", e.LogoInfo = "logoInfo", e.LayoutInfo = "layoutInfo", e.LayoutList = "layoutList", e.ModCmdResponse = "modCommandResponse"
        }(t.ConferenceAction || (t.ConferenceAction = {}))
}, function(e, t, n) {
    var r = n(11).f,
        o = n(13),
        i = n(1)("toStringTag");
    e.exports = function(e, t, n) {
        e && !o(e = n ? e : e.prototype, i) && r(e, i, {
            configurable: !0,
            value: t
        })
    }
}, function(e, t, n) {
    var r = n(7),
        o = n(0).document,
        i = r(o) && r(o.createElement);
    e.exports = function(e) {
        return i ? o.createElement(e) : {}
    }
}, function(e, t, n) {
    var r = n(7);
    e.exports = function(e, t) {
        if (!r(e)) return e;
        var n, o;
        if (t && "function" == typeof(n = e.toString) && !r(o = n.call(e))) return o;
        if ("function" == typeof(n = e.valueOf) && !r(o = n.call(e))) return o;
        if (!t && "function" == typeof(n = e.toString) && !r(o = n.call(e))) return o;
        throw TypeError("Can't convert object to primitive value")
    }
}, function(e, t, n) {
    var r = n(6),
        o = n(76),
        i = n(39),
        s = n(37)("IE_PROTO"),
        a = function() {},
        c = function() {
            var e, t = n(31)("iframe"),
                r = i.length;
            for (t.style.display = "none", n(51).appendChild(t), t.src = "javascript:", (e = t.contentWindow.document).open(), e.write("<script>document.F=Object<\/script>"), e.close(), c = e.F; r--;) delete c.prototype[i[r]];
            return c()
        };
    e.exports = Object.create || function(e, t) {
        var n;
        return null !== e ? (a.prototype = r(e), n = new a, a.prototype = null, n[s] = e) : n = c(), void 0 === t ? n : o(n, t)
    }
}, function(e, t, n) {
    var r = n(49),
        o = n(39);
    e.exports = Object.keys || function(e) {
        return r(e, o)
    }
}, function(e, t) {
    e.exports = function(e) {
        if (null == e) throw TypeError("Can't call method on  " + e);
        return e
    }
}, function(e, t) {
    var n = Math.ceil,
        r = Math.floor;
    e.exports = function(e) {
        return isNaN(e = +e) ? 0 : (e > 0 ? r : n)(e)
    }
}, function(e, t, n) {
    var r = n(38)("keys"),
        o = n(24);
    e.exports = function(e) {
        return r[e] || (r[e] = o(e))
    }
}, function(e, t, n) {
    var r = n(2),
        o = n(0),
        i = o["__core-js_shared__"] || (o["__core-js_shared__"] = {});
    (e.exports = function(e, t) {
        return i[e] || (i[e] = void 0 !== t ? t : {})
    })("versions", []).push({
        version: r.version,
        mode: n(18) ? "pure" : "global",
        copyright: "© 2019 Denis Pushkarev (zloirock.ru)"
    })
}, function(e, t) {
    e.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")
}, function(e, t) {
    t.f = {}.propertyIsEnumerable
}, function(e, t, n) {
    var r = n(84),
        o = n(85),
        i = o;
    i.v1 = r, i.v4 = o, e.exports = i
}, function(e, t, n) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = n(89);
    t.Connect = r.Connect;
    var o = n(90);
    t.Execute = o.Execute;
    var i = n(91);
    t.Subscription = i.Subscription;
    var s = n(92);
    t.Reauthenticate = s.Reauthenticate
}, function(e, t, n) {
    "use strict";
    var r, o = this && this.__extends || (r = function(e, t) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
        }),
        i = this && this.__assign || function() {
            return (i = Object.assign || function(e) {
                for (var t, n = 1, r = arguments.length; n < r; n++)
                    for (var o in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
                return e
            }).apply(this, arguments)
        },
        s = this && this.__awaiter || function(e, t, n, r) {
            return new(n || (n = Promise))(function(o, i) {
                function s(e) {
                    try {
                        c(r.next(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function a(e) {
                    try {
                        c(r.throw(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function c(e) {
                    e.done ? o(e.value) : new n(function(t) {
                        t(e.value)
                    }).then(s, a)
                }
                c((r = r.apply(e, t || [])).next())
            })
        },
        a = this && this.__generator || function(e, t) {
            var n, r, o, i, s = {
                label: 0,
                sent: function() {
                    if (1 & o[0]) throw o[1];
                    return o[1]
                },
                trys: [],
                ops: []
            };
            return i = {
                next: a(0),
                throw: a(1),
                return: a(2)
            }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                return this
            }), i;

            function a(i) {
                return function(a) {
                    return function(i) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; s;) try {
                            if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;
                            switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {
                                case 0:
                                case 1:
                                    o = i;
                                    break;
                                case 4:
                                    return s.label++, {
                                        value: i[1],
                                        done: !1
                                    };
                                case 5:
                                    s.label++, r = i[1], i = [0];
                                    continue;
                                case 7:
                                    i = s.ops.pop(), s.trys.pop();
                                    continue;
                                default:
                                    if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                        s = 0;
                                        continue
                                    }
                                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                        s.label = i[1];
                                        break
                                    }
                                    if (6 === i[0] && s.label < o[1]) {
                                        s.label = o[1], o = i;
                                        break
                                    }
                                    if (o && s.label < o[2]) {
                                        s.label = o[2], s.ops.push(i);
                                        break
                                    }
                                    o[2] && s.ops.pop(), s.trys.pop();
                                    continue
                            }
                            i = t.call(e, s)
                        } catch (e) {
                            i = [6, e], r = 0
                        } finally {
                            n = o = 0
                        }
                        if (5 & i[0]) throw i[1];
                        return {
                            value: i[0] ? i[1] : void 0,
                            done: !0
                        }
                    }([i, a])
                }
            }
        },
        c = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = c(n(4)),
        l = c(n(95)),
        f = n(15),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._statsInterval = null, t
            }
            return o(t, e), t.prototype.hangup = function(n, r) {
                void 0 === n && (n = {}), void 0 === r && (r = !0), this.screenShare instanceof t && this.screenShare.hangup(n, r), e.prototype.hangup.call(this, n, r)
            }, t.prototype.startScreenShare = function(e) {
                return s(this, void 0, void 0, function() {
                    var n, r, o, s, c, u, l, d, p = this;
                    return a(this, function(a) {
                        switch (a.label) {
                            case 0:
                                return [4, f.getDisplayMedia({
                                    video: !0
                                })];
                            case 1:
                                return (n = a.sent()).getTracks().forEach(function(e) {
                                    e.addEventListener("ended", function() {
                                        p.screenShare && p.screenShare.hangup()
                                    })
                                }), r = this.options, o = r.destinationNumber, s = r.remoteCallerName, c = r.remoteCallerNumber, u = r.callerName, l = r.callerNumber, d = i({
                                    screenShare: !0,
                                    localStream: n,
                                    destinationNumber: o + "-screen",
                                    remoteCallerName: s,
                                    remoteCallerNumber: c + "-screen",
                                    callerName: u + " (Screen)",
                                    callerNumber: l + " (Screen)"
                                }, e), this.screenShare = new t(this.session, d), this.screenShare.invite(), [2, this.screenShare]
                        }
                    })
                })
            }, t.prototype.stopScreenShare = function() {
                this.screenShare instanceof t && this.screenShare.hangup()
            }, t.prototype.deaf = function() {
                f.muteMediaElement(this.options.remoteElement)
            }, t.prototype.undeaf = function() {
                f.unmuteMediaElement(this.options.remoteElement)
            }, t.prototype.toggleDeaf = function() {
                f.toggleMuteMediaElement(this.options.remoteElement)
            }, t.prototype.setAudioOutDevice = function(e) {
                return s(this, void 0, void 0, function() {
                    var t, n, r;
                    return a(this, function(o) {
                        return this.options.speakerId = e, t = this.options, n = t.remoteElement, r = t.speakerId, n && r ? [2, f.setMediaElementSinkId(n, r)] : [2, !1]
                    })
                })
            }, t.prototype._finalize = function() {
                this._stats(!1), e.prototype._finalize.call(this)
            }, t.prototype._stats = function(e) {
                var t = this;
                if (void 0 === e && (e = !0), !1 === e) return clearInterval(this._statsInterval);
                u.default.setLevel(2), this._statsInterval = window.setInterval(function() {
                    return s(t, void 0, void 0, function() {
                        var e, t, n, r;
                        return a(this, function(o) {
                            switch (o.label) {
                                case 0:
                                    return [4, this.peer.instance.getStats(null)];
                                case 1:
                                    return e = o.sent(), t = "", n = ["certificate", "codec", "peer-connection", "stream", "local-candidate", "remote-candidate"], r = ["id", "type", "timestamp"], e.forEach(function(e) {
                                        n.includes(e.type) || (t += "\n" + e.type + "\n", Object.keys(e).forEach(function(n) {
                                            r.includes(n) || (t += "\t" + n + ": " + e[n] + "\n")
                                        }))
                                    }), u.default.info(t), [2]
                            }
                        })
                    })
                }, 2e3)
            }, t
        }(l.default);
    t.default = d
}, function(e, t, n) {
    t.f = n(1)
}, function(e, t, n) {
    var r = n(0),
        o = n(2),
        i = n(18),
        s = n(44),
        a = n(11).f;
    e.exports = function(e) {
        var t = o.Symbol || (o.Symbol = i ? {} : r.Symbol || {});
        "_" == e.charAt(0) || e in t || a(t, e, {
            value: s.f(e)
        })
    }
}, function(e, t, n) {
    "use strict";
    var r = n(21);

    function o(e) {
        var t, n;
        this.promise = new e(function(e, r) {
            if (void 0 !== t || void 0 !== n) throw TypeError("Bad Promise constructor");
            t = e, n = r
        }), this.resolve = r(t), this.reject = r(n)
    }
    e.exports.f = function(e) {
        return new o(e)
    }
}, function(e, t, n) {
    e.exports = {
        default: n(74),
        __esModule: !0
    }
}, function(e, t, n) {
    e.exports = !n(12) && !n(22)(function() {
        return 7 != Object.defineProperty(n(31)("div"), "a", {
            get: function() {
                return 7
            }
        }).a
    })
}, function(e, t, n) {
    var r = n(13),
        o = n(14),
        i = n(78)(!1),
        s = n(37)("IE_PROTO");
    e.exports = function(e, t) {
        var n, a = o(e),
            c = 0,
            u = [];
        for (n in a) n != s && r(a, n) && u.push(n);
        for (; t.length > c;) r(a, n = t[c++]) && (~i(u, n) || u.push(n));
        return u
    }
}, function(e, t, n) {
    var r = n(36),
        o = Math.min;
    e.exports = function(e) {
        return e > 0 ? o(r(e), 9007199254740991) : 0
    }
}, function(e, t, n) {
    var r = n(0).document;
    e.exports = r && r.documentElement
}, function(e, t, n) {
    e.exports = {
        default: n(80),
        __esModule: !0
    }
}, function(e, t, n) {
    var r = n(40),
        o = n(23),
        i = n(14),
        s = n(32),
        a = n(13),
        c = n(48),
        u = Object.getOwnPropertyDescriptor;
    t.f = n(12) ? u : function(e, t) {
        if (e = i(e), t = s(t, !0), c) try {
            return u(e, t)
        } catch (e) {}
        if (a(e, t)) return o(!r.f.call(e, t), e[t])
    }
}, function(e, t, n) {
    "use strict";
    var r, o = this && this.__extends || (r = function(e, t) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
        }),
        i = this && this.__awaiter || function(e, t, n, r) {
            return new(n || (n = Promise))(function(o, i) {
                function s(e) {
                    try {
                        c(r.next(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function a(e) {
                    try {
                        c(r.throw(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function c(e) {
                    e.done ? o(e.value) : new n(function(t) {
                        t(e.value)
                    }).then(s, a)
                }
                c((r = r.apply(e, t || [])).next())
            })
        },
        s = this && this.__generator || function(e, t) {
            var n, r, o, i, s = {
                label: 0,
                sent: function() {
                    if (1 & o[0]) throw o[1];
                    return o[1]
                },
                trys: [],
                ops: []
            };
            return i = {
                next: a(0),
                throw: a(1),
                return: a(2)
            }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                return this
            }), i;

            function a(i) {
                return function(a) {
                    return function(i) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; s;) try {
                            if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;
                            switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {
                                case 0:
                                case 1:
                                    o = i;
                                    break;
                                case 4:
                                    return s.label++, {
                                        value: i[1],
                                        done: !1
                                    };
                                case 5:
                                    s.label++, r = i[1], i = [0];
                                    continue;
                                case 7:
                                    i = s.ops.pop(), s.trys.pop();
                                    continue;
                                default:
                                    if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                        s = 0;
                                        continue
                                    }
                                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                        s.label = i[1];
                                        break
                                    }
                                    if (6 === i[0] && s.label < o[1]) {
                                        s.label = o[1], o = i;
                                        break
                                    }
                                    if (o && s.label < o[2]) {
                                        s.label = o[2], s.ops.push(i);
                                        break
                                    }
                                    o[2] && s.ops.pop(), s.trys.pop();
                                    continue
                            }
                            i = t.call(e, s)
                        } catch (e) {
                            i = [6, e], r = 0
                        } finally {
                            n = o = 0
                        }
                        if (5 & i[0]) throw i[1];
                        return {
                            value: i[0] ? i[1] : void 0,
                            done: !0
                        }
                    }([i, a])
                }
            }
        },
        a = this && this.__rest || function(e, t) {
            var n = {};
            for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
            if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                var o = 0;
                for (r = Object.getOwnPropertySymbols(e); o < r.length; o++) t.indexOf(r[o]) < 0 && (n[r[o]] = e[r[o]])
            }
            return n
        },
        c = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = c(n(83)),
        l = c(n(43)),
        f = n(8),
        d = n(5),
        p = n(29),
        h = n(28),
        v = n(3),
        y = n(26),
        b = n(25),
        _ = n(15),
        g = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.calls = {}, t._iceServers = [], t._localElement = null, t._remoteElement = null, t._reconnectDelay = 1e3, t._devices = {}, t._audioConstraints = !0, t._videoConstraints = !1, t._speaker = null, t
            }
            return o(t, e), t.prototype.connect = function() {
                return i(this, void 0, void 0, function() {
                    var t;
                    return s(this, function(n) {
                        switch (n.label) {
                            case 0:
                                return [4, this.refreshDevices()];
                            case 1:
                                return n.sent(), t = this, [4, b.localStorage.getItem(d.SESSION_ID)];
                            case 2:
                                return t.sessionid = n.sent(), e.prototype.connect.call(this), [2]
                        }
                    })
                })
            }, t.prototype.checkPermissions = function(e, t) {
                return void 0 === e && (e = !0), void 0 === t && (t = !0), i(this, void 0, void 0, function() {
                    var n;
                    return s(this, function(r) {
                        switch (r.label) {
                            case 0:
                                return r.trys.push([0, 2, , 3]), [4, h.getUserMedia({
                                    audio: e,
                                    video: t
                                })];
                            case 1:
                                return n = r.sent(), _.stopStream(n), [2, !0];
                            case 2:
                                return r.sent(), [2, !1];
                            case 3:
                                return [2]
                        }
                    })
                })
            }, t.prototype.logout = function() {
                this.disconnect()
            }, t.prototype.disconnect = function() {
                return i(this, void 0, void 0, function() {
                    var t = this;
                    return s(this, function(n) {
                        switch (n.label) {
                            case 0:
                                return Object.keys(this.calls).forEach(function(e) {
                                    return t.calls[e].setState(p.State.Purge)
                                }), this.calls = {}, [4, e.prototype.disconnect.call(this)];
                            case 1:
                                return n.sent(), [2]
                        }
                    })
                })
            }, t.prototype.speedTest = function(e) {
                var t = this;
                return new Promise(function(n, r) {
                    if (f.registerOnce(d.SwEvent.SpeedTest, function(t) {
                            var r = t.upDur,
                                o = t.downDur,
                                i = o ? 8 * e / (o / 1e3) / 1024 : 0;
                            n({
                                upDur: r,
                                downDur: o,
                                upKps: (r ? 8 * e / (r / 1e3) / 1024 : 0).toFixed(0),
                                downKps: i.toFixed(0)
                            })
                        }, t.uuid), !(e = Number(e))) return r("Invalid parameter 'bytes': " + e);
                    t.executeRaw("#SPU " + e);
                    var o = e / 1024;
                    e % 1024 && o++;
                    for (var i = ".".repeat(1024), s = 0; s < o; s++) t.executeRaw("#SPB " + i);
                    t.executeRaw("#SPE")
                })
            }, t.prototype.refreshDevices = function() {
                return i(this, void 0, void 0, function() {
                    var e;
                    return s(this, function(t) {
                        switch (t.label) {
                            case 0:
                                return e = this, [4, h.getDevices()];
                            case 1:
                                return e._devices = t.sent(), [2, this.devices]
                        }
                    })
                })
            }, Object.defineProperty(t.prototype, "devices", {
                get: function() {
                    return this._devices
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.getDeviceResolutions = function(e) {
                return i(this, void 0, void 0, function() {
                    return s(this, function(t) {
                        switch (t.label) {
                            case 0:
                                return t.trys.push([0, 2, , 3]), [4, h.scanResolutions(e)];
                            case 1:
                                return [2, t.sent()];
                            case 2:
                                throw t.sent();
                            case 3:
                                return [2]
                        }
                    })
                })
            }, Object.defineProperty(t.prototype, "videoDevices", {
                get: function() {
                    return this._devices.videoinput
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "audioInDevices", {
                get: function() {
                    return this._devices.audioinput
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "audioOutDevices", {
                get: function() {
                    return this._devices.audiooutput
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "mediaConstraints", {
                get: function() {
                    return {
                        audio: this._audioConstraints,
                        video: this._videoConstraints
                    }
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.setAudioSettings = function(e) {
                return i(this, void 0, void 0, function() {
                    var t, n, r, o;
                    return s(this, function(i) {
                        switch (i.label) {
                            case 0:
                                return t = e.micId, n = e.micLabel, r = a(e, ["micId", "micLabel"]), h.removeUnsupportedConstraints(r), o = this, [4, h.checkDeviceIdConstraints(t, n, "audioinput", r)];
                            case 1:
                                return o._audioConstraints = i.sent(), [2, this._audioConstraints]
                        }
                    })
                })
            }, t.prototype.disableMicrophone = function() {
                this._audioConstraints = !1
            }, t.prototype.enableMicrophone = function() {
                this._audioConstraints = !0
            }, t.prototype.setVideoSettings = function(e) {
                return i(this, void 0, void 0, function() {
                    var t, n, r, o;
                    return s(this, function(i) {
                        switch (i.label) {
                            case 0:
                                return t = e.camId, n = e.camLabel, r = a(e, ["camId", "camLabel"]), h.removeUnsupportedConstraints(r), o = this, [4, h.checkDeviceIdConstraints(t, n, "videoinput", r)];
                            case 1:
                                return o._videoConstraints = i.sent(), [2, this._videoConstraints]
                        }
                    })
                })
            }, t.prototype.disableWebcam = function() {
                this._videoConstraints = !1
            }, t.prototype.enableWebcam = function() {
                this._videoConstraints = !0
            }, Object.defineProperty(t.prototype, "iceServers", {
                get: function() {
                    return this._iceServers
                },
                set: function(e) {
                    this._iceServers = "boolean" == typeof e ? e ? [{
                        urls: ["stun:stun.l.google.com:19302"]
                    }] : [] : e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "speaker", {
                get: function() {
                    return this._speaker
                },
                set: function(e) {
                    if (!Object.keys(this.audioOutDevices).includes(e)) throw new Error("Unknown device " + e + ".");
                    this._speaker = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "localElement", {
                get: function() {
                    return this._localElement
                },
                set: function(e) {
                    this._localElement = v.findElementByType(e)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "remoteElement", {
                get: function() {
                    return this._remoteElement
                },
                set: function(e) {
                    this._remoteElement = v.findElementByType(e)
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.vertoBroadcast = function(e) {
                var t = e.nodeId,
                    n = e.channel,
                    r = void 0 === n ? "" : n,
                    o = e.data;
                if (!r) throw new Error("Invalid channel for broadcast: " + r);
                var i = new y.Broadcast({
                    sessid: this.sessionid,
                    eventChannel: r,
                    data: o
                });
                t && (i.targetNodeId = t), this.execute(i).catch(function(e) {
                    return e
                })
            }, t.prototype.vertoSubscribe = function(e) {
                var t = e.nodeId,
                    n = e.channels,
                    r = void 0 === n ? [] : n,
                    o = e.handler;
                return i(this, void 0, void 0, function() {
                    var e, n, i, a, c, u, l, f = this;
                    return s(this, function(s) {
                        switch (s.label) {
                            case 0:
                                return (r = r.filter(function(e) {
                                    return e && !f._existsSubscription(f.relayProtocol, e)
                                })).length ? (e = new y.Subscribe({
                                    sessid: this.sessionid,
                                    eventChannel: r
                                }), t && (e.targetNodeId = t), [4, this.execute(e)]) : [2];
                            case 1:
                                return n = s.sent(), i = h.destructSubscribeResponse(n), a = i.unauthorized, c = void 0 === a ? [] : a, u = i.subscribed, l = void 0 === u ? [] : u, c.length && c.forEach(function(e) {
                                    return f._removeSubscription(f.relayProtocol, e)
                                }), l.forEach(function(e) {
                                    return f._addSubscription(f.relayProtocol, o, e)
                                }), [2, n]
                        }
                    })
                })
            }, t.prototype.vertoUnsubscribe = function(e) {
                var t = e.nodeId,
                    n = e.channels,
                    r = void 0 === n ? [] : n;
                return i(this, void 0, void 0, function() {
                    var e, n, o, i, a, c, u, l = this;
                    return s(this, function(s) {
                        switch (s.label) {
                            case 0:
                                return (r = r.filter(function(e) {
                                    return e && l._existsSubscription(l.relayProtocol, e)
                                })).length ? (e = new y.Unsubscribe({
                                    sessid: this.sessionid,
                                    eventChannel: r
                                }), t && (e.targetNodeId = t), [4, this.execute(e)]) : [2];
                            case 1:
                                return n = s.sent(), o = h.destructSubscribeResponse(n), i = o.unsubscribed, a = void 0 === i ? [] : i, c = o.notSubscribed, u = void 0 === c ? [] : c, a.forEach(function(e) {
                                    return l._removeSubscription(l.relayProtocol, e)
                                }), u.forEach(function(e) {
                                    return l._removeSubscription(l.relayProtocol, e)
                                }), [2, n]
                        }
                    })
                })
            }, t.prototype.newCall = function(e) {
                return i(this, void 0, void 0, function() {
                    var t, n;
                    return s(this, function(r) {
                        if (t = e.destinationNumber, !(void 0 === t ? null : t)) throw new TypeError("destinationNumber is required");
                        return (n = new l.default(this, e)).invite(), [2, n]
                    })
                })
            }, t
        }(u.default);
    t.default = g
}, function(e, t) {
    var n = "undefined" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" == typeof window.msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto);
    if (n) {
        var r = new Uint8Array(16);
        e.exports = function() {
            return n(r), r
        }
    } else {
        var o = new Array(16);
        e.exports = function() {
            for (var e, t = 0; t < 16; t++) 0 == (3 & t) && (e = 4294967296 * Math.random()), o[t] = e >>> ((3 & t) << 3) & 255;
            return o
        }
    }
}, function(e, t) {
    for (var n = [], r = 0; r < 256; ++r) n[r] = (r + 256).toString(16).substr(1);
    e.exports = function(e, t) {
        var r = t || 0,
            o = n;
        return [o[e[r++]], o[e[r++]], o[e[r++]], o[e[r++]], "-", o[e[r++]], o[e[r++]], "-", o[e[r++]], o[e[r++]], "-", o[e[r++]], o[e[r++]], "-", o[e[r++]], o[e[r++]], o[e[r++]], o[e[r++]], o[e[r++]], o[e[r++]]].join("")
    }
}, function(e, t, n) {
    "use strict";
    var r = this && this.__awaiter || function(e, t, n, r) {
            return new(n || (n = Promise))(function(o, i) {
                function s(e) {
                    try {
                        c(r.next(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function a(e) {
                    try {
                        c(r.throw(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function c(e) {
                    e.done ? o(e.value) : new n(function(t) {
                        t(e.value)
                    }).then(s, a)
                }
                c((r = r.apply(e, t || [])).next())
            })
        },
        o = this && this.__generator || function(e, t) {
            var n, r, o, i, s = {
                label: 0,
                sent: function() {
                    if (1 & o[0]) throw o[1];
                    return o[1]
                },
                trys: [],
                ops: []
            };
            return i = {
                next: a(0),
                throw: a(1),
                return: a(2)
            }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                return this
            }), i;

            function a(i) {
                return function(a) {
                    return function(i) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; s;) try {
                            if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;
                            switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {
                                case 0:
                                case 1:
                                    o = i;
                                    break;
                                case 4:
                                    return s.label++, {
                                        value: i[1],
                                        done: !1
                                    };
                                case 5:
                                    s.label++, r = i[1], i = [0];
                                    continue;
                                case 7:
                                    i = s.ops.pop(), s.trys.pop();
                                    continue;
                                default:
                                    if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                        s = 0;
                                        continue
                                    }
                                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                        s.label = i[1];
                                        break
                                    }
                                    if (6 === i[0] && s.label < o[1]) {
                                        s.label = o[1], o = i;
                                        break
                                    }
                                    if (o && s.label < o[2]) {
                                        s.label = o[2], s.ops.push(i);
                                        break
                                    }
                                    o[2] && s.ops.pop(), s.trys.pop();
                                    continue
                            }
                            i = t.call(e, s)
                        } catch (e) {
                            i = [6, e], r = 0
                        } finally {
                            n = o = 0
                        }
                        if (5 & i[0]) throw i[1];
                        return {
                            value: i[0] ? i[1] : void 0,
                            done: !0
                        }
                    }([i, a])
                }
            }
        },
        i = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = i(n(4)),
        a = i(n(43)),
        c = n(28),
        u = n(26),
        l = n(5),
        f = n(8),
        d = n(29),
        p = n(58),
        h = function() {
            function e(e) {
                this.session = e
            }
            return e.prototype._ack = function(e, t) {
                var n = new u.Result(e, t);
                this.nodeId && (n.targetNodeId = this.nodeId), this.session.execute(n)
            }, e.prototype.handleMessage = function(e) {
                var t = this.session,
                    n = e.id,
                    r = e.method,
                    o = e.params,
                    i = o.callID,
                    c = o.eventChannel,
                    u = o.eventType,
                    p = r === l.VertoMethod.Attach;
                if ("channelPvtData" === u) return this._handlePvtEvent(o.pvtData);
                if (i && t.calls.hasOwnProperty(i)) {
                    if (!p) return t.calls[i].handleMessage(e), void this._ack(n, r);
                    t.calls[i].hangup({}, !1)
                }
                switch (r) {
                    case l.VertoMethod.Punt:
                        t.disconnect();
                        break;
                    case l.VertoMethod.Invite:
                    case l.VertoMethod.Attach:
                        var h = new a.default(t, {
                            id: i,
                            remoteSdp: o.sdp,
                            destinationNumber: o.callee_id_number,
                            remoteCallerName: o.caller_id_name,
                            remoteCallerNumber: o.caller_id_number,
                            callerName: o.callee_id_name,
                            callerNumber: o.callee_id_number,
                            audio: o.sdp.indexOf("m=audio") > 0,
                            video: o.sdp.indexOf("m=video") > 0,
                            attach: p
                        });
                        h.nodeId = this.nodeId, p ? (h.setState(d.State.Recovering), h.answer(), h.handleMessage(e)) : (h.setState(d.State.Ringing), this._ack(n, r));
                        break;
                    case l.VertoMethod.Event:
                    case "webrtc.event":
                        if (!c) return void s.default.error("Verto received an unknown event:", o);
                        var v = t.relayProtocol,
                            y = c.split(".")[0];
                        t._existsSubscription(v, c) ? f.trigger(v, o, c) : c === t.sessionid ? this._handleSessionEvent(o.eventData) : t._existsSubscription(v, y) ? f.trigger(v, o, y) : t.calls.hasOwnProperty(c) ? t.calls[c].handleMessage(e) : f.trigger(l.SwEvent.Notification, o, t.uuid);
                        break;
                    case l.VertoMethod.Info:
                        o.type = l.NOTIFICATION_TYPE.generic, f.trigger(l.SwEvent.Notification, o, t.uuid);
                        break;
                    case l.VertoMethod.ClientReady:
                        o.type = l.NOTIFICATION_TYPE.vertoClientReady, f.trigger(l.SwEvent.Notification, o, t.uuid);
                        break;
                    default:
                        s.default.warn("Verto message unknown method:", e)
                }
            }, e.prototype._retrieveCallId = function(e, t) {
                var n = this,
                    r = Object.keys(this.session.calls);
                if ("bootObj" !== e.action) return r.find(function(e) {
                    return n.session.calls[e].channels.includes(t)
                });
                var o = e.data.find(function(e) {
                    return r.includes(e[0])
                });
                return o instanceof Array ? o[0] : void 0
            }, e.prototype._handlePvtEvent = function(e) {
                return r(this, void 0, void 0, function() {
                    var t, n, r, i, a, u, p, h, v, y, b, _, g, m, w, S, O, x, P, E = this;
                    return o(this, function(o) {
                        switch (o.label) {
                            case 0:
                                switch (t = this.session, n = t.relayProtocol, r = e.action, i = e.laChannel, a = e.laName, u = e.chatChannel, p = e.infoChannel, h = e.modChannel, v = e.conferenceMemberID, y = e.role, b = e.callID, r) {
                                    case "conference-liveArray-join":
                                        return [3, 1];
                                    case "conference-liveArray-part":
                                        return [3, 3]
                                }
                                return [3, 4];
                            case 1:
                                return _ = function() {
                                    t.vertoBroadcast({
                                        nodeId: E.nodeId,
                                        channel: i,
                                        data: {
                                            liveArray: {
                                                command: "bootstrap",
                                                context: i,
                                                name: a
                                            }
                                        }
                                    })
                                }, g = {
                                    nodeId: this.nodeId,
                                    channels: [i],
                                    handler: function(n) {
                                        var r = n.data,
                                            o = b || E._retrieveCallId(r, i);
                                        if (o && t.calls.hasOwnProperty(o)) {
                                            var s = t.calls[o];
                                            s._addChannel(i), s.handleConferenceUpdate(r, e).then(function(e) {
                                                "INVALID_PACKET" === e && _()
                                            })
                                        }
                                    }
                                }, [4, t.vertoSubscribe(g).catch(function(e) {
                                    s.default.error("liveArray subscription error:", e)
                                })];
                            case 2:
                                return m = o.sent(), c.checkSubscribeResponse(m, i) && _(), [3, 4];
                            case 3:
                                return w = null, i && t._existsSubscription(n, i) && (S = t.subscriptions[n][i].callId, O = void 0 === S ? null : S, w = t.calls[O] || null, null !== O && (x = {
                                    type: l.NOTIFICATION_TYPE.conferenceUpdate,
                                    action: d.ConferenceAction.Leave,
                                    conferenceName: a,
                                    participantId: Number(v),
                                    role: y
                                }, f.trigger(l.SwEvent.Notification, x, O, !1) || f.trigger(l.SwEvent.Notification, x, t.uuid), null === w && f.deRegister(l.SwEvent.Notification, null, O))), P = [i, u, p, h], t.vertoUnsubscribe({
                                    nodeId: this.nodeId,
                                    channels: P
                                }).then(function(e) {
                                    var t = e.unsubscribedChannels,
                                        n = void 0 === t ? [] : t;
                                    w && (w.channels = w.channels.filter(function(e) {
                                        return !n.includes(e)
                                    }))
                                }).catch(function(e) {
                                    s.default.error("liveArray unsubscribe error:", e)
                                }), [3, 4];
                            case 4:
                                return [2]
                        }
                    })
                })
            }, e.prototype._handleSessionEvent = function(e) {
                switch (e.contentType) {
                    case "layout-info":
                    case "layer-info":
                        p.MCULayoutEventHandler(this.session, e);
                        break;
                    case "logo-info":
                        var t = {
                            type: l.NOTIFICATION_TYPE.conferenceUpdate,
                            action: d.ConferenceAction.LogoInfo,
                            logo: e.logoURL
                        };
                        f.trigger(l.SwEvent.Notification, t, this.session.uuid)
                }
            }, e
        }();
    t.default = h
}, function(e, t, n) {
    "use strict";
    var r = this && this.__assign || function() {
        return (r = Object.assign || function(e) {
            for (var t, n = 1, r = arguments.length; n < r; n++)
                for (var o in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
            return e
        }).apply(this, arguments)
    };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = n(5),
        i = n(8),
        s = n(29),
        a = n(3);
    t.MCULayoutEventHandler = function(e, t) {
        var n = t.contentType,
            a = t.canvasType,
            u = t.callID,
            l = t.canvasInfo,
            f = void 0 === l ? null : l,
            d = t.currentLayerIdx,
            p = void 0 === d ? -1 : d;
        f && "mcu-personal-canvas" !== a && delete f.memberID;
        var h = {
            type: o.NOTIFICATION_TYPE.conferenceUpdate,
            call: e.calls[u],
            canvasInfo: c(f),
            currentLayerIdx: p
        };
        switch (n) {
            case "layer-info":
                var v = r({
                    action: s.ConferenceAction.LayerInfo
                }, h);
                i.trigger(o.SwEvent.Notification, v, e.uuid);
                break;
            case "layout-info":
                v = r({
                    action: s.ConferenceAction.LayoutInfo
                }, h), i.trigger(o.SwEvent.Notification, v, e.uuid)
        }
    };
    var c = function(e) {
        var t = JSON.stringify(e).replace(/memberID/g, "participantId").replace(/ID"/g, 'Id"').replace(/POS"/g, 'Pos"');
        return a.safeParseJson(t)
    }
}, function(e, t, n) {
    "use strict";
    var r = n(103)(!0);
    n(60)(String, "String", function(e) {
        this._t = String(e), this._i = 0
    }, function() {
        var e, t = this._t,
            n = this._i;
        return n >= t.length ? {
            value: void 0,
            done: !0
        } : (e = r(t, n), this._i += e.length, {
            value: e,
            done: !1
        })
    })
}, function(e, t, n) {
    "use strict";
    var r = n(18),
        o = n(9),
        i = n(61),
        s = n(10),
        a = n(20),
        c = n(104),
        u = n(30),
        l = n(105),
        f = n(1)("iterator"),
        d = !([].keys && "next" in [].keys()),
        p = function() {
            return this
        };
    e.exports = function(e, t, n, h, v, y, b) {
        c(n, t, h);
        var _, g, m, w = function(e) {
                if (!d && e in P) return P[e];
                switch (e) {
                    case "keys":
                    case "values":
                        return function() {
                            return new n(this, e)
                        }
                }
                return function() {
                    return new n(this, e)
                }
            },
            S = t + " Iterator",
            O = "values" == v,
            x = !1,
            P = e.prototype,
            E = P[f] || P["@@iterator"] || v && P[v],
            C = E || w(v),
            k = v ? O ? w("entries") : C : void 0,
            I = "Array" == t && P.entries || E;
        if (I && (m = l(I.call(new e))) !== Object.prototype && m.next && (u(m, S, !0), r || "function" == typeof m[f] || s(m, f, p)), O && E && "values" !== E.name && (x = !0, C = function() {
                return E.call(this)
            }), r && !b || !d && !x && P[f] || s(P, f, C), a[t] = C, a[S] = p, v)
            if (_ = {
                    values: O ? C : w("values"),
                    keys: y ? C : w("keys"),
                    entries: k
                }, b)
                for (g in _) g in P || i(P, g, _[g]);
            else o(o.P + o.F * (d || x), t, _);
        return _
    }
}, function(e, t, n) {
    e.exports = n(10)
}, function(e, t, n) {
    var r = n(35);
    e.exports = function(e) {
        return Object(r(e))
    }
}, function(e, t, n) {
    n(106);
    for (var r = n(0), o = n(10), i = n(20), s = n(1)("toStringTag"), a = "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","), c = 0; c < a.length; c++) {
        var u = a[c],
            l = r[u],
            f = l && l.prototype;
        f && !f[s] && o(f, s, u), i[u] = i.Array
    }
}, function(e, t) {
    t.f = Object.getOwnPropertySymbols
}, function(e, t, n) {
    var r = n(49),
        o = n(39).concat("length", "prototype");
    t.f = Object.getOwnPropertyNames || function(e) {
        return r(e, o)
    }
}, function(e, t) {}, function(e, t, n) {
    var r = n(17),
        o = n(1)("toStringTag"),
        i = "Arguments" == r(function() {
            return arguments
        }());
    e.exports = function(e) {
        var t, n, s;
        return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof(n = function(e, t) {
            try {
                return e[t]
            } catch (e) {}
        }(t = Object(e), o)) ? n : i ? r(t) : "Object" == (s = r(t)) && "function" == typeof t.callee ? "Arguments" : s
    }
}, function(e, t, n) {
    var r = n(6),
        o = n(21),
        i = n(1)("species");
    e.exports = function(e, t) {
        var n, s = r(e).constructor;
        return void 0 === s || null == (n = r(s)[i]) ? t : o(n)
    }
}, function(e, t, n) {
    var r, o, i, s = n(16),
        a = n(126),
        c = n(51),
        u = n(31),
        l = n(0),
        f = l.process,
        d = l.setImmediate,
        p = l.clearImmediate,
        h = l.MessageChannel,
        v = l.Dispatch,
        y = 0,
        b = {},
        _ = function() {
            var e = +this;
            if (b.hasOwnProperty(e)) {
                var t = b[e];
                delete b[e], t()
            }
        },
        g = function(e) {
            _.call(e.data)
        };
    d && p || (d = function(e) {
        for (var t = [], n = 1; arguments.length > n;) t.push(arguments[n++]);
        return b[++y] = function() {
            a("function" == typeof e ? e : Function(e), t)
        }, r(y), y
    }, p = function(e) {
        delete b[e]
    }, "process" == n(17)(f) ? r = function(e) {
        f.nextTick(s(_, e, 1))
    } : v && v.now ? r = function(e) {
        v.now(s(_, e, 1))
    } : h ? (i = (o = new h).port2, o.port1.onmessage = g, r = s(i.postMessage, i, 1)) : l.addEventListener && "function" == typeof postMessage && !l.importScripts ? (r = function(e) {
        l.postMessage(e + "", "*")
    }, l.addEventListener("message", g, !1)) : r = "onreadystatechange" in u("script") ? function(e) {
        c.appendChild(u("script")).onreadystatechange = function() {
            c.removeChild(this), _.call(e)
        }
    } : function(e) {
        setTimeout(s(_, e, 1), 0)
    }), e.exports = {
        set: d,
        clear: p
    }
}, function(e, t) {
    e.exports = function(e) {
        try {
            return {
                e: !1,
                v: e()
            }
        } catch (e) {
            return {
                e: !0,
                v: e
            }
        }
    }
}, function(e, t, n) {
    var r = n(6),
        o = n(7),
        i = n(46);
    e.exports = function(e, t) {
        if (r(e), o(t) && t.constructor === e) return t;
        var n = i.f(e);
        return (0, n.resolve)(t), n.promise
    }
}, function(e, t, n) {
    "use strict";
    var r = function(e) {
        return e && e.__esModule ? e : {
            default: e
        }
    };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = r(n(73));
    t.Relay = o.default;
    var i = r(n(100));
    t.Verto = i.default
}, function(e, t, n) {
    "use strict";
    var r = i(n(47)),
        o = i(n(52));

    function i(e) {
        return e && e.__esModule ? e : {
            default: e
        }
    }
    var s, a = (s = function(e, t) {
            return (s = o.default || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            s(e, t), e.prototype = null === t ? (0, r.default)(t) : (n.prototype = t.prototype, new n)
        }),
        c = function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = c(n(54)),
        l = n(42),
        f = c(n(27)),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._jwtAuth = !0, t
            }
            return a(t, e), t.prototype.execute = function(t) {
                var n = t;
                if (t instanceof f.default) {
                    var r = {
                        message: t.request
                    };
                    t.targetNodeId && (r.node_id = t.targetNodeId), n = new l.Execute({
                        protocol: this.relayProtocol,
                        method: "message",
                        params: r
                    })
                }
                return e.prototype.execute.call(this, n)
            }, t
        }(u.default);
    t.default = d
}, function(e, t, n) {
    n(75);
    var r = n(2).Object;
    e.exports = function(e, t) {
        return r.create(e, t)
    }
}, function(e, t, n) {
    var r = n(9);
    r(r.S, "Object", {
        create: n(33)
    })
}, function(e, t, n) {
    var r = n(11),
        o = n(6),
        i = n(34);
    e.exports = n(12) ? Object.defineProperties : function(e, t) {
        o(e);
        for (var n, s = i(t), a = s.length, c = 0; a > c;) r.f(e, n = s[c++], t[n]);
        return e
    }
}, function(e, t, n) {
    var r = n(17);
    e.exports = Object("z").propertyIsEnumerable(0) ? Object : function(e) {
        return "String" == r(e) ? e.split("") : Object(e)
    }
}, function(e, t, n) {
    var r = n(14),
        o = n(50),
        i = n(79);
    e.exports = function(e) {
        return function(t, n, s) {
            var a, c = r(t),
                u = o(c.length),
                l = i(s, u);
            if (e && n != n) {
                for (; u > l;)
                    if ((a = c[l++]) != a) return !0
            } else
                for (; u > l; l++)
                    if ((e || l in c) && c[l] === n) return e || l || 0;
            return !e && -1
        }
    }
}, function(e, t, n) {
    var r = n(36),
        o = Math.max,
        i = Math.min;
    e.exports = function(e, t) {
        return (e = r(e)) < 0 ? o(e + t, 0) : i(e, t)
    }
}, function(e, t, n) {
    n(81), e.exports = n(2).Object.setPrototypeOf
}, function(e, t, n) {
    var r = n(9);
    r(r.S, "Object", {
        setPrototypeOf: n(82).set
    })
}, function(e, t, n) {
    var r = n(7),
        o = n(6),
        i = function(e, t) {
            if (o(e), !r(t) && null !== t) throw TypeError(t + ": can't set as prototype!")
        };
    e.exports = {
        set: Object.setPrototypeOf || ("__proto__" in {} ? function(e, t, r) {
            try {
                (r = n(16)(Function.call, n(53).f(Object.prototype, "__proto__").set, 2))(e, []), t = !(e instanceof Array)
            } catch (e) {
                t = !0
            }
            return function(e, n) {
                return i(e, n), t ? e.__proto__ = n : r(e, n), e
            }
        }({}, !1) : void 0),
        check: i
    }
}, function(e, t, n) {
    "use strict";
    var r = this && this.__awaiter || function(e, t, n, r) {
            return new(n || (n = Promise))(function(o, i) {
                function s(e) {
                    try {
                        c(r.next(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function a(e) {
                    try {
                        c(r.throw(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function c(e) {
                    e.done ? o(e.value) : new n(function(t) {
                        t(e.value)
                    }).then(s, a)
                }
                c((r = r.apply(e, t || [])).next())
            })
        },
        o = this && this.__generator || function(e, t) {
            var n, r, o, i, s = {
                label: 0,
                sent: function() {
                    if (1 & o[0]) throw o[1];
                    return o[1]
                },
                trys: [],
                ops: []
            };
            return i = {
                next: a(0),
                throw: a(1),
                return: a(2)
            }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                return this
            }), i;

            function a(i) {
                return function(a) {
                    return function(i) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; s;) try {
                            if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;
                            switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {
                                case 0:
                                case 1:
                                    o = i;
                                    break;
                                case 4:
                                    return s.label++, {
                                        value: i[1],
                                        done: !1
                                    };
                                case 5:
                                    s.label++, r = i[1], i = [0];
                                    continue;
                                case 7:
                                    i = s.ops.pop(), s.trys.pop();
                                    continue;
                                default:
                                    if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                        s = 0;
                                        continue
                                    }
                                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                        s.label = i[1];
                                        break
                                    }
                                    if (6 === i[0] && s.label < o[1]) {
                                        s.label = o[1], o = i;
                                        break
                                    }
                                    if (o && s.label < o[2]) {
                                        s.label = o[2], s.ops.push(i);
                                        break
                                    }
                                    o[2] && s.ops.pop(), s.trys.pop();
                                    continue
                            }
                            i = t.call(e, s)
                        } catch (e) {
                            i = [6, e], r = 0
                        } finally {
                            n = o = 0
                        }
                        if (5 & i[0]) throw i[1];
                        return {
                            value: i[0] ? i[1] : void 0,
                            done: !0
                        }
                    }([i, a])
                }
            }
        },
        i = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = n(41),
        a = i(n(4)),
        c = i(n(87)),
        u = i(n(88)),
        l = n(8),
        f = i(n(94)),
        d = n(5),
        p = n(42),
        h = n(3),
        v = function() {
            function e(e) {
                if (this.options = e, this.uuid = s.v4(), this.sessionid = "", this.subscriptions = {}, this.expiresAt = 0, this.relayProtocol = null, this.connection = null, this._jwtAuth = !1, this._reconnectDelay = 5e3, this._autoReconnect = !1, this._idle = !1, this._executeQueue = [], !this.validateOptions()) throw new Error("Invalid init options");
                this._onSocketOpen = this._onSocketOpen.bind(this), this._onSocketClose = this._onSocketClose.bind(this), this._onSocketError = this._onSocketError.bind(this), this._onSocketMessage = this._onSocketMessage.bind(this), this._handleLoginError = this._handleLoginError.bind(this), this._checkTokenExpiration = this._checkTokenExpiration.bind(this), this._attachListeners(), this.connection = new c.default(this)
            }
            return Object.defineProperty(e.prototype, "__logger", {
                get: function() {
                    return a.default
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "connected", {
                get: function() {
                    return this.connection && this.connection.connected
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "expired", {
                get: function() {
                    return this.expiresAt && this.expiresAt <= Date.now() / 1e3
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.execute = function(e) {
                var t = this;
                return this._idle ? new Promise(function(n) {
                    return t._executeQueue.push({
                        resolve: n,
                        msg: e
                    })
                }) : this.connected ? this.connection.send(e) : new Promise(function(n) {
                    t._executeQueue.push({
                        resolve: n,
                        msg: e
                    }), t.connect()
                })
            }, e.prototype.executeRaw = function(e) {
                this._idle ? this._executeQueue.push({
                    msg: e
                }) : this.connection.sendRawText(e)
            }, e.prototype.validateOptions = function() {
                var e = this.options,
                    t = e.project,
                    n = void 0 !== t && t,
                    r = e.token;
                return Boolean(n && (void 0 !== r && r))
            }, e.prototype.broadcast = function(e) {}, e.prototype.subscribe = function(e) {
                var t = e.protocol,
                    n = e.channels,
                    i = e.handler;
                return r(this, void 0, void 0, function() {
                    var e, r, s, a, c, u, l = this;
                    return o(this, function(o) {
                        switch (o.label) {
                            case 0:
                                return e = new p.Subscription({
                                    command: d.ADD,
                                    protocol: t,
                                    channels: n
                                }), [4, this.execute(e)];
                            case 1:
                                return r = o.sent(), s = r.failed_channels, a = void 0 === s ? [] : s, c = r.subscribe_channels, u = void 0 === c ? [] : c, a.length && a.forEach(function(e) {
                                    return l._removeSubscription(t, e)
                                }), u.forEach(function(e) {
                                    return l._addSubscription(t, i, e)
                                }), [2, r]
                        }
                    })
                })
            }, e.prototype.unsubscribe = function(e) {
                var t = e.protocol,
                    n = e.channels;
                e.handler;
                return r(this, void 0, void 0, function() {
                    var e;
                    return o(this, function(r) {
                        return e = new p.Subscription({
                            command: d.REMOVE,
                            protocol: t,
                            channels: n
                        }), [2, this.execute(e)]
                    })
                })
            }, e.prototype.disconnect = function() {
                return r(this, void 0, void 0, function() {
                    return o(this, function(e) {
                        switch (e.label) {
                            case 0:
                                return [4, this._unsubscribeAll()];
                            case 1:
                                return e.sent(), this.subscriptions = {}, this._autoReconnect = !1, this._removeConnection(), this._executeQueue = [], this._detachListeners(), [2]
                        }
                    })
                })
            }, e.prototype.on = function(e, t) {
                return l.register(e, t, this.uuid), this
            }, e.prototype.off = function(e, t) {
                return l.deRegister(e, t, this.uuid), this
            }, e.prototype.refreshToken = function(e) {
                return r(this, void 0, void 0, function() {
                    var t, n, r, i, s, c;
                    return o(this, function(o) {
                        switch (o.label) {
                            case 0:
                                this.options.token = e, o.label = 1;
                            case 1:
                                return o.trys.push([1, 6, , 7]), this.expired ? [4, this.connect()] : [3, 3];
                            case 2:
                                return o.sent(), [3, 5];
                            case 3:
                                return t = new p.Reauthenticate(this.options.project, e, this.sessionid), [4, this.execute(t)];
                            case 4:
                                n = o.sent(), r = n.authorization, i = (void 0 === r ? {} : r).expires_at, s = void 0 === i ? null : i, this.expiresAt = +s || 0, o.label = 5;
                            case 5:
                                return [3, 7];
                            case 6:
                                return c = o.sent(), a.default.error("refreshToken error:", c), l.trigger(d.SwEvent.Error, c, this.uuid, !1), [3, 7];
                            case 7:
                                return [2]
                        }
                    })
                })
            }, e.prototype.connect = function() {
                return r(this, void 0, void 0, function() {
                    return o(this, function(e) {
                        if (this.connection) {
                            if (this.connection.isAlive) return [2]
                        } else this.connection = new c.default(this);
                        return this._attachListeners(), this.connection.connect(), [2]
                    })
                })
            }, e.prototype._handleLoginError = function(e) {
                this._autoReconnect = !1, l.trigger(d.SwEvent.Error, e, this.uuid)
            }, e.prototype._onSocketOpen = function() {
                return r(this, void 0, void 0, function() {
                    var e, t, n, r, i, s, c, f, h, v, y, b, _, g;
                    return o(this, function(o) {
                        switch (o.label) {
                            case 0:
                                return this._idle = !1, t = this._jwtAuth ? "jwt_token" : "token", n = this.options, r = n.project, i = n.token, s = new p.Connect(((e = {
                                    project: r
                                })[t] = i, e), this.sessionid), [4, this.execute(s).catch(this._handleLoginError)];
                            case 1:
                                return (c = o.sent()) ? (this._autoReconnect = !0, f = this, [4, u.default(this)]) : [3, 3];
                            case 2:
                                f.relayProtocol = o.sent(), h = c.sessionid, v = c.nodeid, y = c.master_nodeid, b = c.authorization, _ = (void 0 === b ? {} : b).expires_at, g = void 0 === _ ? null : _, this.expiresAt = +g || 0, this._checkTokenExpiration(), this.sessionid = h, this.nodeid = v, this.master_nodeid = y, this._emptyExecuteQueues(), l.trigger(d.SwEvent.Ready, this, this.uuid), a.default.info("Session Ready!"), o.label = 3;
                            case 3:
                                return [2]
                        }
                    })
                })
            }, e.prototype._onSocketClose = function() {
                var e = this;
                this.expired && (this._idle = !0, this._autoReconnect = !1, this.expiresAt = 0), this._autoReconnect && setTimeout(function() {
                    return e.connect()
                }, this._reconnectDelay)
            }, e.prototype._onSocketError = function(e) {
                a.default.error(e.message)
            }, e.prototype._onSocketMessage = function(e) {
                var t = e.method,
                    n = e.params;
                switch (t) {
                    case d.BladeMethod.Broadcast:
                        f.default(this, n);
                        break;
                    case d.BladeMethod.Disconnect:
                        this._idle = !0
                }
            }, e.prototype._removeSubscription = function(e, t) {
                this._existsSubscription(e, t) && (t ? (delete this.subscriptions[e][t], l.deRegister(e, null, t)) : (delete this.subscriptions[e], l.deRegisterAll(e)))
            }, e.prototype._addSubscription = function(e, t, n) {
                void 0 === t && (t = null), this._existsSubscription(e, n) || (this._existsSubscription(e) || (this.subscriptions[e] = {}), this.subscriptions[e][n] = {}, h.isFunction(t) && l.register(e, t, n))
            }, e.prototype._existsSubscription = function(e, t) {
                return !(!this.subscriptions.hasOwnProperty(e) || !(!t || t && this.subscriptions[e].hasOwnProperty(t)))
            }, e.prototype._attachListeners = function() {
                this._detachListeners(), this.on(d.SwEvent.SocketOpen, this._onSocketOpen), this.on(d.SwEvent.SocketClose, this._onSocketClose), this.on(d.SwEvent.SocketError, this._onSocketError), this.on(d.SwEvent.SocketMessage, this._onSocketMessage)
            }, e.prototype._detachListeners = function() {
                this.off(d.SwEvent.SocketOpen, this._onSocketOpen), this.off(d.SwEvent.SocketClose, this._onSocketClose), this.off(d.SwEvent.SocketError, this._onSocketError), this.off(d.SwEvent.SocketMessage, this._onSocketMessage)
            }, e.prototype._emptyExecuteQueues = function() {
                var e = this;
                this._executeQueue.forEach(function(t) {
                    var n = t.resolve,
                        r = t.msg;
                    "string" == typeof r ? e.executeRaw(r) : n(e.execute(r))
                })
            }, e.prototype._removeConnection = function() {
                this._idle = !0, this.connection && this.connection.close(), this.connection = null
            }, e.prototype._checkTokenExpiration = function() {
                this.expiresAt && (this.expiresAt - Date.now() / 1e3 <= 60 && (a.default.warn("Your JWT is going to expire. You should refresh it to keep the session live."), l.trigger(d.SwEvent.Notification, {
                    type: d.NOTIFICATION_TYPE.refreshToken,
                    session: this
                }, this.uuid, !1)), this.expired || setTimeout(this._checkTokenExpiration, 3e4))
            }, e.prototype._unsubscribeAll = function() {
                var e = this,
                    t = Object.keys(this.subscriptions).map(function(t) {
                        var n = Object.keys(e.subscriptions[t]);
                        return e.unsubscribe({
                            protocol: t,
                            channels: n
                        }).catch(console.error)
                    });
                return Promise.all(t)
            }, e.on = function(e, t) {
                l.register(e, t)
            }, e.off = function(e) {
                l.deRegister(e)
            }, e.uuid = function() {
                return s.v4()
            }, e
        }();
    t.default = v
}, function(e, t, n) {
    var r, o, i = n(55),
        s = n(56),
        a = 0,
        c = 0;
    e.exports = function(e, t, n) {
        var u = t && n || 0,
            l = t || [],
            f = (e = e || {}).node || r,
            d = void 0 !== e.clockseq ? e.clockseq : o;
        if (null == f || null == d) {
            var p = i();
            null == f && (f = r = [1 | p[0], p[1], p[2], p[3], p[4], p[5]]), null == d && (d = o = 16383 & (p[6] << 8 | p[7]))
        }
        var h = void 0 !== e.msecs ? e.msecs : (new Date).getTime(),
            v = void 0 !== e.nsecs ? e.nsecs : c + 1,
            y = h - a + (v - c) / 1e4;
        if (y < 0 && void 0 === e.clockseq && (d = d + 1 & 16383), (y < 0 || h > a) && void 0 === e.nsecs && (v = 0), v >= 1e4) throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
        a = h, c = v, o = d;
        var b = (1e4 * (268435455 & (h += 122192928e5)) + v) % 4294967296;
        l[u++] = b >>> 24 & 255, l[u++] = b >>> 16 & 255, l[u++] = b >>> 8 & 255, l[u++] = 255 & b;
        var _ = h / 4294967296 * 1e4 & 268435455;
        l[u++] = _ >>> 8 & 255, l[u++] = 255 & _, l[u++] = _ >>> 24 & 15 | 16, l[u++] = _ >>> 16 & 255, l[u++] = d >>> 8 | 128, l[u++] = 255 & d;
        for (var g = 0; g < 6; ++g) l[u + g] = f[g];
        return t || s(l)
    }
}, function(e, t, n) {
    var r = n(55),
        o = n(56);
    e.exports = function(e, t, n) {
        var i = t && n || 0;
        "string" == typeof e && (t = "binary" === e ? new Array(16) : null, e = null);
        var s = (e = e || {}).random || (e.rng || r)();
        if (s[6] = 15 & s[6] | 64, s[8] = 63 & s[8] | 128, t)
            for (var a = 0; a < 16; ++a) t[i + a] = s[a];
        return t || o(s)
    }
}, function(e, t, n) {
    var r, o;
    ! function(i, s) {
        "use strict";
        void 0 === (o = "function" == typeof(r = function() {
            var e = function() {},
                t = "undefined",
                n = ["trace", "debug", "info", "warn", "error"];

            function r(e, t) {
                var n = e[t];
                if ("function" == typeof n.bind) return n.bind(e);
                try {
                    return Function.prototype.bind.call(n, e)
                } catch (t) {
                    return function() {
                        return Function.prototype.apply.apply(n, [e, arguments])
                    }
                }
            }

            function o(t, r) {
                for (var o = 0; o < n.length; o++) {
                    var i = n[o];
                    this[i] = o < t ? e : this.methodFactory(i, t, r)
                }
                this.log = this.debug
            }

            function i(n, i, s) {
                return function(n) {
                    "debug" === n && (n = "log");
                    return typeof console !== t && (void 0 !== console[n] ? r(console, n) : void 0 !== console.log ? r(console, "log") : e)
                }(n) || function(e, n, r) {
                    return function() {
                        typeof console !== t && (o.call(this, n, r), this[e].apply(this, arguments))
                    }
                }.apply(this, arguments)
            }

            function s(e, r, s) {
                var a, c = this,
                    u = "loglevel";

                function l() {
                    var e;
                    if (typeof window !== t) {
                        try {
                            e = window.localStorage[u]
                        } catch (e) {}
                        if (typeof e === t) try {
                            var n = window.document.cookie,
                                r = n.indexOf(encodeURIComponent(u) + "="); - 1 !== r && (e = /^([^;]+)/.exec(n.slice(r))[1])
                        } catch (e) {}
                        return void 0 === c.levels[e] && (e = void 0), e
                    }
                }
                e && (u += ":" + e), c.name = e, c.levels = {
                    TRACE: 0,
                    DEBUG: 1,
                    INFO: 2,
                    WARN: 3,
                    ERROR: 4,
                    SILENT: 5
                }, c.methodFactory = s || i, c.getLevel = function() {
                    return a
                }, c.setLevel = function(r, i) {
                    if ("string" == typeof r && void 0 !== c.levels[r.toUpperCase()] && (r = c.levels[r.toUpperCase()]), !("number" == typeof r && r >= 0 && r <= c.levels.SILENT)) throw "log.setLevel() called with invalid level: " + r;
                    if (a = r, !1 !== i && function(e) {
                            var r = (n[e] || "silent").toUpperCase();
                            if (typeof window === t) return;
                            try {
                                return void(window.localStorage[u] = r)
                            } catch (e) {}
                            try {
                                window.document.cookie = encodeURIComponent(u) + "=" + r + ";"
                            } catch (e) {}
                        }(r), o.call(c, r, e), typeof console === t && r < c.levels.SILENT) return "No console available for logging"
                }, c.setDefaultLevel = function(e) {
                    l() || c.setLevel(e, !1)
                }, c.enableAll = function(e) {
                    c.setLevel(c.levels.TRACE, e)
                }, c.disableAll = function(e) {
                    c.setLevel(c.levels.SILENT, e)
                };
                var f = l();
                null == f && (f = null == r ? "WARN" : r), c.setLevel(f, !1)
            }
            var a = new s,
                c = {};
            a.getLogger = function(e) {
                if ("string" != typeof e || "" === e) throw new TypeError("You must supply a name when creating a logger.");
                var t = c[e];
                return t || (t = c[e] = new s(e, a.getLevel(), a.methodFactory)), t
            };
            var u = typeof window !== t ? window.log : void 0;
            return a.noConflict = function() {
                return typeof window !== t && window.log === a && (window.log = u), a
            }, a.getLoggers = function() {
                return c
            }, a
        }) ? r.call(t, n, t, e) : r) || (e.exports = o)
    }()
}, function(e, t, n) {
    "use strict";
    var r = this && this.__importDefault || function(e) {
        return e && e.__esModule ? e : {
            default: e
        }
    };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = r(n(4)),
        i = n(5),
        s = n(3),
        a = n(8),
        c = n(3),
        u = "undefined" != typeof WebSocket ? WebSocket : null;
    t.setWebSocket = function(e) {
        u = e
    };
    var l = 0,
        f = 1,
        d = 2,
        p = 3,
        h = function() {
            function e(e) {
                this.session = e, this._wsClient = null, this._host = "wss://relay.signalwire.com", this._timers = {}, this._connected = !1, this.upDur = null, this.downDur = null;
                var t = e.options.host;
                t && (this._host = s.checkWebSocketHost(t))
            }
            return Object.defineProperty(e.prototype, "connected", {
                get: function() {
                    return this._wsClient && this._wsClient.readyState === f
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "connecting", {
                get: function() {
                    return this._wsClient && this._wsClient.readyState === l
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "closing", {
                get: function() {
                    return this._wsClient && this._wsClient.readyState === d
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "closed", {
                get: function() {
                    return this._wsClient && this._wsClient.readyState === p
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "isAlive", {
                get: function() {
                    return this.connecting || this.connected
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "isDead", {
                get: function() {
                    return this.closing || this.closed
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.connect = function() {
                var e = this;
                this._wsClient = new u(this._host), this._wsClient.onopen = function(t) {
                    return e._connected = !0, e._ping(), a.trigger(i.SwEvent.SocketOpen, t, e.session.uuid)
                }, this._wsClient.onclose = function(t) {
                    return e._connected = !1, a.trigger(i.SwEvent.SocketClose, t, e.session.uuid)
                }, this._wsClient.onerror = function(t) {
                    return a.trigger(i.SwEvent.SocketError, t, e.session.uuid)
                }, this._wsClient.onmessage = function(t) {
                    var n = s.safeParseJson(t.data);
                    "string" != typeof n ? (e._unsetTimer(n.id), o.default.debug("RECV: \n", JSON.stringify(n, null, 2), "\n"), a.trigger(n.id, n) || a.trigger(i.SwEvent.SocketMessage, n, e.session.uuid)) : e._handleStringResponse(n)
                }
            }, e.prototype.sendRawText = function(e) {
                this._wsClient.send(e)
            }, e.prototype.send = function(e) {
                var t = this,
                    n = e.request,
                    r = new Promise(function(e, r) {
                        if (n.hasOwnProperty("result")) return e();
                        a.registerOnce(n.id, function(t) {
                            var n = s.destructResponse(t),
                                o = n.result,
                                i = n.error;
                            return i ? r(i) : e(o)
                        }), t._setTimer(n.id)
                    });
                return o.default.debug("SEND: \n", JSON.stringify(n, null, 2), "\n"), this._wsClient.send(JSON.stringify(n)), r
            }, e.prototype.close = function() {
                this._wsClient.close(), this._wsClient = null
            }, e.prototype._unsetTimer = function(e) {
                clearTimeout(this._timers[e]), delete this._timers[e]
            }, e.prototype._setTimer = function(e) {
                var t = this;
                this._timers[e] = setTimeout(function() {
                    a.trigger(e, {
                        error: {
                            code: "408",
                            message: "Request Timeout"
                        }
                    }), t._unsetTimer(e)
                }, 1e4)
            }, e.prototype._handleStringResponse = function(e) {
                if (/^#SP/.test(e)) switch (e[3]) {
                    case "U":
                        this.upDur = parseInt(e.substring(4));
                        break;
                    case "D":
                        this.downDur = parseInt(e.substring(4)), a.trigger(i.SwEvent.SpeedTest, {
                            upDur: this.upDur,
                            downDur: this.downDur
                        }, this.session.uuid)
                } else o.default.warn("Unknown message from socket", e)
            }, e.prototype._ping = function() {
                var e = this;
                if (!("undefined" != typeof WebSocket && this._wsClient instanceof WebSocket)) return this._connected ? (this._connected = !1, this._wsClient.ping("", function() {
                    return e._connected = !0
                }), setTimeout(function() {
                    return e._ping()
                }, 5e3)) : void(this._wsClient && (c.isFunction(this._wsClient._beginClose) ? this._wsClient._beginClose() : this._wsClient.close()))
            }, e
        }();
    t.default = h
}, function(e, t, n) {
    "use strict";
    var r = this && this.__awaiter || function(e, t, n, r) {
            return new(n || (n = Promise))(function(o, i) {
                function s(e) {
                    try {
                        c(r.next(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function a(e) {
                    try {
                        c(r.throw(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function c(e) {
                    e.done ? o(e.value) : new n(function(t) {
                        t(e.value)
                    }).then(s, a)
                }
                c((r = r.apply(e, t || [])).next())
            })
        },
        o = this && this.__generator || function(e, t) {
            var n, r, o, i, s = {
                label: 0,
                sent: function() {
                    if (1 & o[0]) throw o[1];
                    return o[1]
                },
                trys: [],
                ops: []
            };
            return i = {
                next: a(0),
                throw: a(1),
                return: a(2)
            }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                return this
            }), i;

            function a(i) {
                return function(a) {
                    return function(i) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; s;) try {
                            if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;
                            switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {
                                case 0:
                                case 1:
                                    o = i;
                                    break;
                                case 4:
                                    return s.label++, {
                                        value: i[1],
                                        done: !1
                                    };
                                case 5:
                                    s.label++, r = i[1], i = [0];
                                    continue;
                                case 7:
                                    i = s.ops.pop(), s.trys.pop();
                                    continue;
                                default:
                                    if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                        s = 0;
                                        continue
                                    }
                                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                        s.label = i[1];
                                        break
                                    }
                                    if (6 === i[0] && s.label < o[1]) {
                                        s.label = o[1], o = i;
                                        break
                                    }
                                    if (o && s.label < o[2]) {
                                        s.label = o[2], s.ops.push(i);
                                        break
                                    }
                                    o[2] && s.ops.pop(), s.trys.pop();
                                    continue
                            }
                            i = t.call(e, s)
                        } catch (e) {
                            i = [6, e], r = 0
                        } finally {
                            n = o = 0
                        }
                        if (5 & i[0]) throw i[1];
                        return {
                            value: i[0] ? i[1] : void 0,
                            done: !0
                        }
                    }([i, a])
                }
            }
        },
        i = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        },
        s = this;
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = i(n(4)),
        c = n(42),
        u = n(25);
    t.default = function(e) {
        return r(s, void 0, void 0, function() {
            var t, n, r, i, s, l;
            return o(this, function(o) {
                switch (o.label) {
                    case 0:
                        return t = {
                            service: ""
                        }, n = e.options.project + "-setup", [4, u.sessionStorage.getItem(n)];
                    case 1:
                        return (r = o.sent()) && (t.protocol = r), i = new c.Execute({
                            protocol: "signalwire",
                            method: "setup",
                            params: t
                        }), [4, e.execute(i)];
                    case 2:
                        return s = o.sent().protocol, (l = void 0 === s ? null : s) ? [4, e.subscribe({
                            protocol: l,
                            channels: ["notifications"]
                        })] : [3, 5];
                    case 3:
                        return o.sent(), [4, u.sessionStorage.setItem(n, l)];
                    case 4:
                        return o.sent(), [3, 6];
                    case 5:
                        a.default.error("Error during setup the session protocol."), o.label = 6;
                    case 6:
                        return [2, l]
                }
            })
        })
    }
}, function(e, t, n) {
    "use strict";
    var r, o = this && this.__extends || (r = function(e, t) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
        }),
        i = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = i(n(19)),
        a = 2,
        c = 1,
        u = 0,
        l = function(e) {
            function t(t, n) {
                var r = e.call(this) || this;
                r.method = "blade.connect";
                var o = {
                    version: {
                        major: a,
                        minor: c,
                        revision: u
                    },
                    authentication: t
                };
                return n && (o.sessionid = n), r.buildRequest({
                    method: r.method,
                    params: o
                }), r
            }
            return o(t, e), t
        }(s.default);
    t.Connect = l
}, function(e, t, n) {
    "use strict";
    var r, o = this && this.__extends || (r = function(e, t) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
        }),
        i = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = function(e) {
        function t(t, n) {
            void 0 === n && (n = "");
            var r, o = e.call(this) || this;
            return o.method = "blade.execute", r = t.hasOwnProperty("result") ? {
                result: t
            } : {
                method: o.method,
                params: t
            }, n && (r.id = n), o.buildRequest(r), o
        }
        return o(t, e), t
    }(i(n(19)).default);
    t.Execute = s
}, function(e, t, n) {
    "use strict";
    var r, o = this && this.__extends || (r = function(e, t) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
        }),
        i = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = function(e) {
        function t(t) {
            var n = e.call(this) || this;
            return n.method = "blade.subscription", t.hasOwnProperty("auto_create") && !t.auto_create && delete t.auto_create, t.hasOwnProperty("downstream") && !t.downstream && delete t.downstream, n.buildRequest({
                method: n.method,
                params: t
            }), n
        }
        return o(t, e), t
    }(i(n(19)).default);
    t.Subscription = s
}, function(e, t, n) {
    "use strict";
    var r, o = this && this.__extends || (r = function(e, t) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
        }),
        i = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = function(e) {
        function t(t, n, r) {
            var o = e.call(this) || this;
            o.method = "blade.reauthenticate";
            var i = {
                sessionid: r,
                authentication: {
                    project: t,
                    jwt_token: n
                }
            };
            return o.buildRequest({
                method: o.method,
                params: i
            }), o
        }
        return o(t, e), t
    }(i(n(19)).default);
    t.Reauthenticate = s
}, function(e, t) {
    var n, r, o = e.exports = {};

    function i() {
        throw new Error("setTimeout has not been defined")
    }

    function s() {
        throw new Error("clearTimeout has not been defined")
    }

    function a(e) {
        if (n === setTimeout) return setTimeout(e, 0);
        if ((n === i || !n) && setTimeout) return n = setTimeout, setTimeout(e, 0);
        try {
            return n(e, 0)
        } catch (t) {
            try {
                return n.call(null, e, 0)
            } catch (t) {
                return n.call(this, e, 0)
            }
        }
    }! function() {
        try {
            n = "function" == typeof setTimeout ? setTimeout : i
        } catch (e) {
            n = i
        }
        try {
            r = "function" == typeof clearTimeout ? clearTimeout : s
        } catch (e) {
            r = s
        }
    }();
    var c, u = [],
        l = !1,
        f = -1;

    function d() {
        l && c && (l = !1, c.length ? u = c.concat(u) : f = -1, u.length && p())
    }

    function p() {
        if (!l) {
            var e = a(d);
            l = !0;
            for (var t = u.length; t;) {
                for (c = u, u = []; ++f < t;) c && c[f].run();
                f = -1, t = u.length
            }
            c = null, l = !1,
                function(e) {
                    if (r === clearTimeout) return clearTimeout(e);
                    if ((r === s || !r) && clearTimeout) return r = clearTimeout, clearTimeout(e);
                    try {
                        r(e)
                    } catch (t) {
                        try {
                            return r.call(null, e)
                        } catch (t) {
                            return r.call(this, e)
                        }
                    }
                }(e)
        }
    }

    function h(e, t) {
        this.fun = e, this.array = t
    }

    function v() {}
    o.nextTick = function(e) {
        var t = new Array(arguments.length - 1);
        if (arguments.length > 1)
            for (var n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
        u.push(new h(e, t)), 1 !== u.length || l || a(p)
    }, h.prototype.run = function() {
        this.fun.apply(null, this.array)
    }, o.title = "browser", o.browser = !0, o.env = {}, o.argv = [], o.version = "", o.versions = {}, o.on = v, o.addListener = v, o.once = v, o.off = v, o.removeListener = v, o.removeAllListeners = v, o.emit = v, o.prependListener = v, o.prependOnceListener = v, o.listeners = function(e) {
        return []
    }, o.binding = function(e) {
        throw new Error("process.binding is not supported")
    }, o.cwd = function() {
        return "/"
    }, o.chdir = function(e) {
        throw new Error("process.chdir is not supported")
    }, o.umask = function() {
        return 0
    }
}, function(e, t, n) {
    "use strict";
    var r = this && this.__importDefault || function(e) {
        return e && e.__esModule ? e : {
            default: e
        }
    };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = r(n(4)),
        i = r(n(57)),
        s = n(99);
    t.default = function(e, t) {
        var n = t.protocol,
            r = t.params,
            a = r.event_type,
            c = r.node_id;
        if (n !== e.relayProtocol) return o.default.error("Session protocol mismatch.");
        switch (a) {
            case s.CallNotification.State:
            case s.CallNotification.Receive:
            case s.CallNotification.Connect:
            case s.CallNotification.Record:
            case s.CallNotification.Play:
            case s.CallNotification.Collect:
            case s.CallNotification.Fax:
                e.calling.notificationHandler(r);
                break;
            case "webrtc.message":
                var u = new i.default(e);
                u.nodeId = c, u.handleMessage(r.params);
                break;
            default:
                return o.default.error("Unknown notification type: " + a)
        }
    }
}, function(e, t, n) {
    "use strict";
    var r = this && this.__assign || function() {
            return (r = Object.assign || function(e) {
                for (var t, n = 1, r = arguments.length; n < r; n++)
                    for (var o in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
                return e
            }).apply(this, arguments)
        },
        o = this && this.__awaiter || function(e, t, n, r) {
            return new(n || (n = Promise))(function(o, i) {
                function s(e) {
                    try {
                        c(r.next(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function a(e) {
                    try {
                        c(r.throw(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function c(e) {
                    e.done ? o(e.value) : new n(function(t) {
                        t(e.value)
                    }).then(s, a)
                }
                c((r = r.apply(e, t || [])).next())
            })
        },
        i = this && this.__generator || function(e, t) {
            var n, r, o, i, s = {
                label: 0,
                sent: function() {
                    if (1 & o[0]) throw o[1];
                    return o[1]
                },
                trys: [],
                ops: []
            };
            return i = {
                next: a(0),
                throw: a(1),
                return: a(2)
            }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                return this
            }), i;

            function a(i) {
                return function(a) {
                    return function(i) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; s;) try {
                            if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;
                            switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {
                                case 0:
                                case 1:
                                    o = i;
                                    break;
                                case 4:
                                    return s.label++, {
                                        value: i[1],
                                        done: !1
                                    };
                                case 5:
                                    s.label++, r = i[1], i = [0];
                                    continue;
                                case 7:
                                    i = s.ops.pop(), s.trys.pop();
                                    continue;
                                default:
                                    if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                        s = 0;
                                        continue
                                    }
                                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                        s.label = i[1];
                                        break
                                    }
                                    if (6 === i[0] && s.label < o[1]) {
                                        s.label = o[1], o = i;
                                        break
                                    }
                                    if (o && s.label < o[2]) {
                                        s.label = o[2], s.ops.push(i);
                                        break
                                    }
                                    o[2] && s.ops.pop(), s.trys.pop();
                                    continue
                            }
                            i = t.call(e, s)
                        } catch (e) {
                            i = [6, e], r = 0
                        } finally {
                            n = o = 0
                        }
                        if (5 & i[0]) throw i[1];
                        return {
                            value: i[0] ? i[1] : void 0,
                            done: !0
                        }
                    }([i, a])
                }
            }
        },
        s = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = n(41),
        c = s(n(4)),
        u = n(26),
        l = s(n(98)),
        f = n(5),
        d = n(29),
        p = n(8),
        h = n(28),
        v = n(3),
        y = n(15),
        b = n(58),
        _ = function() {
            function e(e, t) {
                var n = this;
                this.session = e, this.id = "", this.state = d.State[d.State.New], this.prevState = "", this.channels = [], this.role = d.Role.Participant, this._state = d.State.New, this._prevState = d.State.New, this.gotAnswer = !1, this.gotEarly = !1, this._lastSerno = 0, this._targetNodeId = null, this._iceTimeout = null, this._iceDone = !1, this._checkConferenceSerno = function(e) {
                    var t = e < 0 || !n._lastSerno || n._lastSerno && e === n._lastSerno + 1;
                    return t && e >= 0 && (n._lastSerno = e), t
                };
                var r = e.iceServers,
                    o = e.speaker,
                    i = e.localElement,
                    s = e.remoteElement,
                    a = e.mediaConstraints,
                    c = a.audio,
                    u = a.video;
                this.options = Object.assign({}, d.DEFAULT_CALL_OPTIONS, {
                    audio: c,
                    video: u,
                    iceServers: r,
                    localElement: i,
                    remoteElement: s,
                    speakerId: o
                }, t), this._onMediaError = this._onMediaError.bind(this), this._init()
            }
            return Object.defineProperty(e.prototype, "nodeId", {
                get: function() {
                    return this._targetNodeId
                },
                set: function(e) {
                    this._targetNodeId = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "audioState", {
                get: function() {
                    return this.peer.audioState
                },
                set: function(e) {
                    this.peer.audioState = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "videoState", {
                get: function() {
                    return this.peer.videoState
                },
                set: function(e) {
                    this.peer.videoState = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "localStream", {
                get: function() {
                    return this.options.localStream
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "remoteStream", {
                get: function() {
                    return this.options.remoteStream
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "memberChannel", {
                get: function() {
                    return "conference-member." + this.id
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.invite = function() {
                this.direction = f.Direction.Outbound, this.peer = new l.default(f.PeerType.Offer, this.options), this._registerPeerEvents()
            }, e.prototype.answer = function() {
                this.direction = f.Direction.Inbound, this.peer = new l.default(f.PeerType.Answer, this.options), this._registerPeerEvents()
            }, e.prototype.hangup = function(e, t) {
                var n = this;
                void 0 === e && (e = {}), void 0 === t && (t = !0), this.cause = e.cause || "NORMAL_CLEARING", this.causeCode = e.causeCode || 16, this.setState(d.State.Hangup);
                var r = function() {
                    n.peer && n.peer.instance.close(), n.setState(d.State.Destroy)
                };
                if (t) {
                    var o = new u.Bye({
                        sessid: this.session.sessionid,
                        dialogParams: this.options
                    });
                    this._execute(o).catch(function(e) {
                        return c.default.error("verto.bye failed!", e)
                    }).then(r.bind(this))
                } else r()
            }, e.prototype.transfer = function(e) {
                var t = new u.Modify({
                    sessid: this.session.sessionid,
                    action: "transfer",
                    destination: e,
                    dialogParams: this.options
                });
                this._execute(t)
            }, e.prototype.replace = function(e) {
                var t = new u.Modify({
                    sessid: this.session.sessionid,
                    action: "replace",
                    replaceCallID: e,
                    dialogParams: this.options
                });
                this._execute(t)
            }, e.prototype.hold = function() {
                var e = new u.Modify({
                    sessid: this.session.sessionid,
                    action: "hold",
                    dialogParams: this.options
                });
                return this._execute(e).then(this._handleChangeHoldStateSuccess.bind(this)).catch(this._handleChangeHoldStateError.bind(this))
            }, e.prototype.unhold = function() {
                var e = new u.Modify({
                    sessid: this.session.sessionid,
                    action: "unhold",
                    dialogParams: this.options
                });
                return this._execute(e).then(this._handleChangeHoldStateSuccess.bind(this)).catch(this._handleChangeHoldStateError.bind(this))
            }, e.prototype.toggleHold = function() {
                var e = new u.Modify({
                    sessid: this.session.sessionid,
                    action: "toggleHold",
                    dialogParams: this.options
                });
                return this._execute(e).then(this._handleChangeHoldStateSuccess.bind(this)).catch(this._handleChangeHoldStateError.bind(this))
            }, e.prototype.dtmf = function(e) {
                var t = new u.Info({
                    sessid: this.session.sessionid,
                    dtmf: e,
                    dialogParams: this.options
                });
                this._execute(t)
            }, e.prototype.message = function(e, t) {
                var n = {
                        from: this.session.options.login,
                        to: e,
                        body: t
                    },
                    r = new u.Info({
                        sessid: this.session.sessionid,
                        msg: n,
                        dialogParams: this.options
                    });
                this._execute(r)
            }, e.prototype.muteAudio = function() {
                this.peer.audioState = "off"
            }, e.prototype.unmuteAudio = function() {
                this.peer.audioState = "on"
            }, e.prototype.toggleAudioMute = function() {
                this.peer.audioState = "toggle"
            }, e.prototype.setAudioInDevice = function(e) {
                return o(this, void 0, void 0, function() {
                    var t, n, r, o, s;
                    return i(this, function(i) {
                        switch (i.label) {
                            case 0:
                                return t = this.peer.instance, (n = t.getSenders().find(function(e) {
                                    return "audio" === e.track.kind
                                })) ? [4, y.getUserMedia({
                                    audio: {
                                        deviceId: {
                                            exact: e
                                        }
                                    }
                                })] : [3, 2];
                            case 1:
                                r = i.sent(), o = r.getAudioTracks()[0], n.replaceTrack(o), this.options.micId = e, (s = this.options.localStream).getAudioTracks().forEach(function(e) {
                                    return e.stop()
                                }), s.getVideoTracks().forEach(function(e) {
                                    return r.addTrack(e)
                                }), this.options.localStream = r, i.label = 2;
                            case 2:
                                return [2]
                        }
                    })
                })
            }, e.prototype.muteVideo = function() {
                this.peer.videoState = "off"
            }, e.prototype.unmuteVideo = function() {
                this.peer.videoState = "on"
            }, e.prototype.toggleVideoMute = function() {
                this.peer.videoState = "toggle"
            }, e.prototype.setVideoDevice = function(e) {
                return o(this, void 0, void 0, function() {
                    var t, n, r, o, s, a, c;
                    return i(this, function(i) {
                        switch (i.label) {
                            case 0:
                                return t = this.peer.instance, (n = t.getSenders().find(function(e) {
                                    return "video" === e.track.kind
                                })) ? [4, y.getUserMedia({
                                    video: {
                                        deviceId: {
                                            exact: e
                                        }
                                    }
                                })] : [3, 2];
                            case 1:
                                r = i.sent(), o = r.getVideoTracks()[0], n.replaceTrack(o), s = this.options, a = s.localElement, c = s.localStream, y.attachMediaStream(a, r), this.options.camId = e, c.getAudioTracks().forEach(function(e) {
                                    return r.addTrack(e)
                                }), c.getVideoTracks().forEach(function(e) {
                                    return e.stop()
                                }), this.options.localStream = r, i.label = 2;
                            case 2:
                                return [2]
                        }
                    })
                })
            }, e.prototype.setState = function(e) {
                var t = this;
                switch (this._prevState = this._state, this._state = e, this.state = d.State[this._state].toLowerCase(), this.prevState = d.State[this._prevState].toLowerCase(), c.default.info("Call " + this.id + " state change from " + this.prevState + " to " + this.state), this._dispatchNotification({
                    type: f.NOTIFICATION_TYPE.callUpdate,
                    call: this
                }), e) {
                    case d.State.Purge:
                        this.hangup({
                            cause: "PURGE",
                            causeCode: "01"
                        }, !1);
                        break;
                    case d.State.Active:
                        setTimeout(function() {
                            var e = t.options,
                                n = e.remoteElement,
                                r = e.speakerId;
                            n && r && y.setMediaElementSinkId(n, r)
                        }, 0);
                        break;
                    case d.State.Destroy:
                        this._finalize()
                }
            }, e.prototype.handleMessage = function(e) {
                var t = e.method,
                    n = e.params;
                switch (t) {
                    case f.VertoMethod.Answer:
                        if (this.gotAnswer = !0, this._state >= d.State.Active) return;
                        this._state >= d.State.Early && this.setState(d.State.Active), this.gotEarly || this._onRemoteSdp(n.sdp);
                        break;
                    case f.VertoMethod.Media:
                        if (this._state >= d.State.Early) return;
                        this.gotEarly = !0, this._onRemoteSdp(n.sdp);
                        break;
                    case f.VertoMethod.Display:
                    case f.VertoMethod.Attach:
                        var o = n.display_name,
                            i = n.display_number,
                            s = n.display_direction === f.Direction.Inbound ? f.Direction.Outbound : f.Direction.Inbound,
                            a = {
                                type: f.NOTIFICATION_TYPE[t],
                                call: this,
                                displayName: o,
                                displayNumber: i,
                                displayDirection: s
                            };
                        p.trigger(f.SwEvent.Notification, a, this.id) || p.trigger(f.SwEvent.Notification, a, this.session.uuid);
                        break;
                    case f.VertoMethod.Info:
                    case f.VertoMethod.Event:
                        a = r({}, n, {
                            type: f.NOTIFICATION_TYPE.generic,
                            call: this
                        });
                        p.trigger(f.SwEvent.Notification, a, this.id) || p.trigger(f.SwEvent.Notification, a, this.session.uuid);
                        break;
                    case f.VertoMethod.Bye:
                        this.hangup(n, !1)
                }
            }, e.prototype.handleConferenceUpdate = function(e, t) {
                return o(this, void 0, void 0, function() {
                    var n, o, s, a, u, l, f, p, h, y, b, _, g;
                    return i(this, function(i) {
                        switch (i.label) {
                            case 0:
                                if (!this._checkConferenceSerno(e.wireSerno) && e.name !== t.laName) return c.default.error("ConferenceUpdate invalid wireSerno or packet name:", e), [2, "INVALID_PACKET"];
                                switch (n = e.action, o = e.data, s = e.hashKey, a = void 0 === s ? String(this._lastSerno) : s, u = e.arrIndex, n) {
                                    case "bootObj":
                                        return [3, 1];
                                    case "add":
                                        return [3, 8];
                                    case "modify":
                                        return [3, 9];
                                    case "del":
                                        return [3, 10];
                                    case "clear":
                                        return [3, 11]
                                }
                                return [3, 12];
                            case 1:
                                return this._lastSerno = 0, t.chatID, l = t.chatChannel, f = t.infoChannel, p = t.modChannel, h = t.laName, y = t.conferenceMemberID, b = t.role, this._dispatchConferenceUpdate({
                                    action: d.ConferenceAction.Join,
                                    conferenceName: h,
                                    participantId: Number(y),
                                    role: b
                                }), l ? [4, this._subscribeConferenceChat(l)] : [3, 3];
                            case 2:
                                i.sent(), i.label = 3;
                            case 3:
                                return f ? [4, this._subscribeConferenceInfo(f)] : [3, 5];
                            case 4:
                                i.sent(), i.label = 5;
                            case 5:
                                return p && b === d.Role.Moderator ? [4, this._subscribeConferenceModerator(p)] : [3, 7];
                            case 6:
                                i.sent(), i.label = 7;
                            case 7:
                                for (g in _ = [], o) _.push(r({
                                    callId: o[g][0],
                                    index: Number(g)
                                }, v.mutateLiveArrayData(o[g][1])));
                                return this._dispatchConferenceUpdate({
                                    action: d.ConferenceAction.Bootstrap,
                                    participants: _
                                }), [3, 13];
                            case 8:
                                return this._dispatchConferenceUpdate(r({
                                    action: d.ConferenceAction.Add,
                                    callId: a,
                                    index: u
                                }, v.mutateLiveArrayData(o))), [3, 13];
                            case 9:
                                return this._dispatchConferenceUpdate(r({
                                    action: d.ConferenceAction.Modify,
                                    callId: a,
                                    index: u
                                }, v.mutateLiveArrayData(o))), [3, 13];
                            case 10:
                                return this._dispatchConferenceUpdate(r({
                                    action: d.ConferenceAction.Delete,
                                    callId: a,
                                    index: u
                                }, v.mutateLiveArrayData(o))), [3, 13];
                            case 11:
                                return this._dispatchConferenceUpdate({
                                    action: d.ConferenceAction.Clear
                                }), [3, 13];
                            case 12:
                                return this._dispatchConferenceUpdate({
                                    action: n,
                                    data: o,
                                    callId: a,
                                    index: u
                                }), [3, 13];
                            case 13:
                                return [2]
                        }
                    })
                })
            }, e.prototype._addChannel = function(e) {
                this.channels.includes(e) || this.channels.push(e);
                var t = this.session.relayProtocol;
                this.session._existsSubscription(t, e) && (this.session.subscriptions[t][e] = r({}, this.session.subscriptions[t][e], {
                    callId: this.id
                }))
            }, e.prototype._subscribeConferenceChat = function(e) {
                return o(this, void 0, void 0, function() {
                    var t, n, r = this;
                    return i(this, function(o) {
                        switch (o.label) {
                            case 0:
                                return t = {
                                    nodeId: this.nodeId,
                                    channels: [e],
                                    handler: function(e) {
                                        var t = e.data,
                                            n = t.direction,
                                            o = t.from,
                                            i = t.fromDisplay,
                                            s = t.message,
                                            a = t.type;
                                        r._dispatchConferenceUpdate({
                                            action: d.ConferenceAction.ChatMessage,
                                            direction: n,
                                            participantNumber: o,
                                            participantName: i,
                                            messageText: s,
                                            messageType: a,
                                            messageId: e.eventSerno
                                        })
                                    }
                                }, [4, this.session.vertoSubscribe(t).catch(function(e) {
                                    c.default.error("ConfChat subscription error:", e)
                                })];
                            case 1:
                                return n = o.sent(), h.checkSubscribeResponse(n, e) && (this._addChannel(e), Object.defineProperties(this, {
                                    sendChatMessage: {
                                        configurable: !0,
                                        value: function(t, n) {
                                            r.session.vertoBroadcast({
                                                nodeId: r.nodeId,
                                                channel: e,
                                                data: {
                                                    action: "send",
                                                    message: t,
                                                    type: n
                                                }
                                            })
                                        }
                                    }
                                })), [2]
                        }
                    })
                })
            }, e.prototype._subscribeConferenceInfo = function(e) {
                return o(this, void 0, void 0, function() {
                    var t, n, r = this;
                    return i(this, function(o) {
                        switch (o.label) {
                            case 0:
                                return t = {
                                    nodeId: this.nodeId,
                                    channels: [e],
                                    handler: function(e) {
                                        var t = e.eventData;
                                        switch (t.contentType) {
                                            case "layout-info":
                                                t.callID = r.id, b.MCULayoutEventHandler(r.session, t);
                                                break;
                                            default:
                                                c.default.error("Conference-Info unknown contentType", e)
                                        }
                                    }
                                }, [4, this.session.vertoSubscribe(t).catch(function(e) {
                                    c.default.error("ConfInfo subscription error:", e)
                                })];
                            case 1:
                                return n = o.sent(), h.checkSubscribeResponse(n, e) && this._addChannel(e), [2]
                        }
                    })
                })
            }, e.prototype._confControl = function(e, t) {
                void 0 === t && (t = {});
                var n = r({
                    application: "conf-control",
                    callID: this.id,
                    value: null
                }, t);
                this.session.vertoBroadcast({
                    nodeId: this.nodeId,
                    channel: e,
                    data: n
                })
            }, e.prototype._subscribeConferenceModerator = function(e) {
                return o(this, void 0, void 0, function() {
                    var t, n, r, o, s = this;
                    return i(this, function(i) {
                        switch (i.label) {
                            case 0:
                                return t = function(t, n, r) {
                                    void 0 === n && (n = null), void 0 === r && (r = null);
                                    var o = parseInt(n) || null;
                                    s._confControl(e, {
                                        command: t,
                                        id: o,
                                        value: r
                                    })
                                }, n = function() {
                                    var e = s.options.video;
                                    if ("boolean" == typeof e && !e || "object" == typeof e && v.objEmpty(e)) throw "Conference " + s.id + " has no video!"
                                }, r = {
                                    nodeId: this.nodeId,
                                    channels: [e],
                                    handler: function(e) {
                                        var t = e.data;
                                        switch (t["conf-command"]) {
                                            case "list-videoLayouts":
                                                if (t.responseData) {
                                                    var n = JSON.stringify(t.responseData).replace(/IDS"/g, 'Ids"');
                                                    s._dispatchConferenceUpdate({
                                                        action: d.ConferenceAction.LayoutList,
                                                        layouts: JSON.parse(n)
                                                    })
                                                }
                                                break;
                                            default:
                                                s._dispatchConferenceUpdate({
                                                    action: d.ConferenceAction.ModCmdResponse,
                                                    command: t["conf-command"],
                                                    response: t.response
                                                })
                                        }
                                    }
                                }, [4, this.session.vertoSubscribe(r).catch(function(e) {
                                    c.default.error("ConfMod subscription error:", e)
                                })];
                            case 1:
                                return o = i.sent(), h.checkSubscribeResponse(o, e) && (this.role = d.Role.Moderator, this._addChannel(e), Object.defineProperties(this, {
                                    listVideoLayouts: {
                                        configurable: !0,
                                        value: function() {
                                            t("list-videoLayouts")
                                        }
                                    },
                                    playMedia: {
                                        configurable: !0,
                                        value: function(e) {
                                            t("play", null, e)
                                        }
                                    },
                                    stopMedia: {
                                        configurable: !0,
                                        value: function() {
                                            t("stop", null, "all")
                                        }
                                    },
                                    deaf: {
                                        configurable: !0,
                                        value: function(e) {
                                            t("deaf", e)
                                        }
                                    },
                                    undeaf: {
                                        configurable: !0,
                                        value: function(e) {
                                            t("undeaf", e)
                                        }
                                    },
                                    startRecord: {
                                        configurable: !0,
                                        value: function(e) {
                                            t("recording", null, ["start", e])
                                        }
                                    },
                                    stopRecord: {
                                        configurable: !0,
                                        value: function() {
                                            t("recording", null, ["stop", "all"])
                                        }
                                    },
                                    snapshot: {
                                        configurable: !0,
                                        value: function(e) {
                                            n(), t("vid-write-png", null, e)
                                        }
                                    },
                                    setVideoLayout: {
                                        configurable: !0,
                                        value: function(e, r) {
                                            n(), t("vid-layout", null, r ? [e, r] : e)
                                        }
                                    },
                                    kick: {
                                        configurable: !0,
                                        value: function(e) {
                                            t("kick", e)
                                        }
                                    },
                                    muteMic: {
                                        configurable: !0,
                                        value: function(e) {
                                            t("tmute", e)
                                        }
                                    },
                                    muteVideo: {
                                        configurable: !0,
                                        value: function(e) {
                                            n(), t("tvmute", e)
                                        }
                                    },
                                    presenter: {
                                        configurable: !0,
                                        value: function(e) {
                                            n(), t("vid-res-id", e, "presenter")
                                        }
                                    },
                                    videoFloor: {
                                        configurable: !0,
                                        value: function(e) {
                                            n(), t("vid-floor", e, "force")
                                        }
                                    },
                                    banner: {
                                        configurable: !0,
                                        value: function(e, r) {
                                            n(), t("vid-banner", e, encodeURI(r))
                                        }
                                    },
                                    volumeDown: {
                                        configurable: !0,
                                        value: function(e) {
                                            t("volume_out", e, "down")
                                        }
                                    },
                                    volumeUp: {
                                        configurable: !0,
                                        value: function(e) {
                                            t("volume_out", e, "up")
                                        }
                                    },
                                    gainDown: {
                                        configurable: !0,
                                        value: function(e) {
                                            t("volume_in", e, "down")
                                        }
                                    },
                                    gainUp: {
                                        configurable: !0,
                                        value: function(e) {
                                            t("volume_in", e, "up")
                                        }
                                    },
                                    transfer: {
                                        configurable: !0,
                                        value: function(e, n) {
                                            t("transfer", e, n)
                                        }
                                    }
                                })), [2]
                        }
                    })
                })
            }, e.prototype._handleChangeHoldStateSuccess = function(e) {
                return "active" === e.holdState ? this.setState(d.State.Active) : this.setState(d.State.Held), !0
            }, e.prototype._handleChangeHoldStateError = function(e) {
                return c.default.error("Failed to " + e.action + " on call " + this.id), !1
            }, e.prototype._onRemoteSdp = function(e) {
                var t = this,
                    n = h.sdpMediaOrderHack(e, this.peer.instance.localDescription.sdp);
                this.options.useStereo && (n = h.sdpStereoHack(n));
                var r = y.sdpToJsonHack({
                    sdp: n,
                    type: f.PeerType.Answer
                });
                this.peer.instance.setRemoteDescription(r).then(function() {
                    t.gotEarly && t.setState(d.State.Early), t.gotAnswer && t.setState(d.State.Active)
                }).catch(function(e) {
                    c.default.error("Call setRemoteDescription Error: ", e), t.hangup()
                })
            }, e.prototype._requestAnotherLocalDescription = function() {
                v.isFunction(this.peer.onSdpReadyTwice) ? p.trigger(f.SwEvent.Error, new Error("SDP without candidates for the second time!"), this.session.uuid) : (Object.defineProperty(this.peer, "onSdpReadyTwice", {
                    value: this._onIceSdp.bind(this)
                }), this._iceDone = !1, this.peer.startNegotiation())
            }, e.prototype._onIceSdp = function(e) {
                var t = this;
                this._iceTimeout && clearTimeout(this._iceTimeout), this._iceTimeout = null, this._iceDone = !0;
                var n = e.sdp,
                    r = e.type;
                if (-1 !== n.indexOf("candidate")) {
                    var o = null,
                        i = {
                            sessid: this.session.sessionid,
                            sdp: n,
                            dialogParams: this.options
                        };
                    switch (r) {
                        case f.PeerType.Offer:
                            this.setState(d.State.Requesting), o = new u.Invite(i);
                            break;
                        case f.PeerType.Answer:
                            this.setState(d.State.Answering), o = !0 === this.options.attach ? new u.Attach(i) : new u.Answer(i);
                            break;
                        default:
                            return c.default.error(this.id + " - Unknown local SDP type:", e), this.hangup({}, !1)
                    }
                    this._execute(o).then(function(e) {
                        var n = e.node_id,
                            o = void 0 === n ? null : n;
                        t._targetNodeId = o, r === f.PeerType.Offer ? t.setState(d.State.Trying) : t.setState(d.State.Active)
                    }).catch(function(e) {
                        c.default.error(t.id + " - Sending " + r + " error:", e), t.hangup()
                    })
                } else this._requestAnotherLocalDescription()
            }, e.prototype._registerPeerEvents = function() {
                var e = this,
                    t = this.peer.instance;
                this._iceDone = !1, t.onicecandidate = function(n) {
                    e._iceDone || (null === e._iceTimeout && (e._iceTimeout = setTimeout(function() {
                        return e._onIceSdp(t.localDescription)
                    }, 1e3)), n.candidate ? c.default.info("IceCandidate:", n.candidate) : e._onIceSdp(t.localDescription))
                }, t.ontrack = function(t) {
                    if (e.options.remoteStream = t.streams[0], !0 !== e.options.screenShare) {
                        var n = e.options,
                            r = n.remoteElement,
                            o = n.remoteStream;
                        y.attachMediaStream(r, o)
                    }
                }, t.onaddstream = function(t) {
                    e.options.remoteStream = t.stream
                }
            }, e.prototype._onMediaError = function(e) {
                this._dispatchNotification({
                    type: f.NOTIFICATION_TYPE.userMediaError,
                    error: e
                }), this.hangup({}, !1)
            }, e.prototype._dispatchConferenceUpdate = function(e) {
                this._dispatchNotification(r({
                    type: f.NOTIFICATION_TYPE.conferenceUpdate,
                    call: this
                }, e))
            }, e.prototype._dispatchNotification = function(e) {
                !0 !== this.options.screenShare && (p.trigger(f.SwEvent.Notification, e, this.id, !1) || p.trigger(f.SwEvent.Notification, e, this.session.uuid))
            }, e.prototype._execute = function(e) {
                return this.nodeId && (e.targetNodeId = this.nodeId), this.session.execute(e)
            }, e.prototype._init = function() {
                var e = this.options,
                    t = e.id,
                    n = e.userVariables,
                    r = e.remoteCallerNumber,
                    o = e.onNotification;
                t || (this.options.id = a.v4()), this.id = this.options.id, n && !v.objEmpty(n) || (this.options.userVariables = this.session.options.userVariables || {}), r || (this.options.remoteCallerNumber = this.options.destinationNumber), this.session.calls[this.id] = this, p.register(f.SwEvent.MediaError, this._onMediaError, this.id), v.isFunction(o) && p.register(f.SwEvent.Notification, o.bind(this), this.id), this.setState(d.State.New), c.default.info("New Call with Options:", this.options)
            }, e.prototype._finalize = function() {
                var e = this.options,
                    t = e.remoteStream,
                    n = e.localStream,
                    r = e.remoteElement,
                    o = e.localElement;
                y.stopStream(t), y.stopStream(n), !0 !== this.options.screenShare && (y.detachMediaStream(r), y.detachMediaStream(o)), p.deRegister(f.SwEvent.MediaError, null, this.id), this.peer = null, this.session.calls[this.id] = null, delete this.session.calls[this.id]
            }, e
        }();
    t.default = _
}, function(e, t, n) {
    "use strict";
    var r, o = this && this.__extends || (r = function(e, t) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
        }),
        i = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = function(e) {
        function t(t, n, r, o) {
            void 0 === o && (o = {});
            var i = e.call(this) || this;
            i.method = "login";
            var s = {
                login: t,
                passwd: n,
                userVariables: o,
                loginParams: {}
            };
            return r && (s.sessid = r), i.buildRequest({
                method: i.method,
                params: s
            }), i
        }
        return o(t, e), t
    }(i(n(27)).default);
    t.Login = s
}, function(e, t, n) {
    "use strict";
    var r, o = this && this.__extends || (r = function(e, t) {
            return (r = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
        }),
        i = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = function(e) {
        function t(t, n) {
            var r = e.call(this) || this;
            return r.buildRequest({
                id: t,
                result: {
                    method: n
                }
            }), r
        }
        return o(t, e), t
    }(i(n(27)).default);
    t.Result = s
}, function(e, t, n) {
    "use strict";
    var r = this && this.__awaiter || function(e, t, n, r) {
            return new(n || (n = Promise))(function(o, i) {
                function s(e) {
                    try {
                        c(r.next(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function a(e) {
                    try {
                        c(r.throw(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function c(e) {
                    e.done ? o(e.value) : new n(function(t) {
                        t(e.value)
                    }).then(s, a)
                }
                c((r = r.apply(e, t || [])).next())
            })
        },
        o = this && this.__generator || function(e, t) {
            var n, r, o, i, s = {
                label: 0,
                sent: function() {
                    if (1 & o[0]) throw o[1];
                    return o[1]
                },
                trys: [],
                ops: []
            };
            return i = {
                next: a(0),
                throw: a(1),
                return: a(2)
            }, "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                return this
            }), i;

            function a(i) {
                return function(a) {
                    return function(i) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; s;) try {
                            if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o;
                            switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) {
                                case 0:
                                case 1:
                                    o = i;
                                    break;
                                case 4:
                                    return s.label++, {
                                        value: i[1],
                                        done: !1
                                    };
                                case 5:
                                    s.label++, r = i[1], i = [0];
                                    continue;
                                case 7:
                                    i = s.ops.pop(), s.trys.pop();
                                    continue;
                                default:
                                    if (!(o = (o = s.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
                                        s = 0;
                                        continue
                                    }
                                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                                        s.label = i[1];
                                        break
                                    }
                                    if (6 === i[0] && s.label < o[1]) {
                                        s.label = o[1], o = i;
                                        break
                                    }
                                    if (o && s.label < o[2]) {
                                        s.label = o[2], s.ops.push(i);
                                        break
                                    }
                                    o[2] && s.ops.pop(), s.trys.pop();
                                    continue
                            }
                            i = t.call(e, s)
                        } catch (e) {
                            i = [6, e], r = 0
                        } finally {
                            n = o = 0
                        }
                        if (5 & i[0]) throw i[1];
                        return {
                            value: i[0] ? i[1] : void 0,
                            done: !0
                        }
                    }([i, a])
                }
            }
        },
        i = this && this.__importDefault || function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = i(n(4)),
        a = n(28),
        c = n(5),
        u = n(15),
        l = n(3),
        f = n(8),
        d = function() {
            function e(e, t) {
                this.type = e, this.options = t, this.onSdpReadyTwice = null, this._negotiating = !1, s.default.info("New Peer with type:", this.type, "Options:", this.options), this._constraints = {
                    offerToReceiveAudio: !0,
                    offerToReceiveVideo: !0
                }, this._sdpReady = this._sdpReady.bind(this), this._init()
            }
            return Object.defineProperty(e.prototype, "audioState", {
                get: function() {
                    return this._audioTracks().every(function(e) {
                        return e.enabled
                    })
                },
                set: function(e) {
                    this._setTracks(this._audioTracks(), e)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "videoState", {
                get: function() {
                    return this._videoTracks().every(function(e) {
                        return e.enabled
                    })
                },
                set: function(e) {
                    this._setTracks(this._videoTracks(), e)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.startNegotiation = function() {
                this._negotiating = !0, this._isOffer() ? this._createOffer() : this._createAnswer()
            }, e.prototype._init = function() {
                return r(this, void 0, void 0, function() {
                    var e, t, n, r, i, a, l, d = this;
                    return o(this, function(o) {
                        switch (o.label) {
                            case 0:
                                return this.instance = u.RTCPeerConnection(this._config()), this.instance.onsignalingstatechange = function(e) {
                                    switch (d.instance.signalingState) {
                                        case "stable":
                                            d._negotiating = !1;
                                            break;
                                        case "closed":
                                            d.instance = null;
                                            break;
                                        default:
                                            d._negotiating = !0
                                    }
                                }, this.instance.onnegotiationneeded = function(e) {
                                    d._negotiating ? s.default.debug("Skip twice onnegotiationneeded..") : d.startNegotiation()
                                }, e = this.options, [4, this._retrieveLocalStream().catch(function(e) {
                                    return f.trigger(c.SwEvent.MediaError, e, d.options.id), null
                                })];
                            case 1:
                                return e.localStream = o.sent(), t = this.options, n = t.localElement, r = t.localStream, i = void 0 === r ? null : r, a = t.screenShare, l = void 0 !== a && a, u.streamIsValid(i) ? (this.instance.hasOwnProperty("addTrack") ? i.getTracks().forEach(function(e) {
                                    return d.instance.addTrack(e, i)
                                }) : this.instance.addStream(i), !0 !== l && (u.muteMediaElement(n), u.attachMediaStream(n, i))) : null === i && this.startNegotiation(), [2]
                        }
                    })
                })
            }, e.prototype._createOffer = function() {
                this._isOffer() && this.instance.createOffer(this._constraints).then(this._setLocalDescription.bind(this)).then(this._sdpReady).catch(function(e) {
                    return s.default.error("Peer _createOffer error:", e)
                })
            }, e.prototype._createAnswer = function() {
                var e = this;
                if (this._isAnswer()) {
                    var t = this.options,
                        n = t.remoteSdp,
                        r = t.useStereo,
                        o = void 0 === r || r ? a.sdpStereoHack(n) : n,
                        i = u.sdpToJsonHack({
                            sdp: o,
                            type: c.PeerType.Offer
                        });
                    this.instance.setRemoteDescription(i).then(function() {
                        return e.instance.createAnswer()
                    }).then(this._setLocalDescription.bind(this)).then(this._sdpReady).catch(function(e) {
                        return s.default.error("Peer _createAnswer error:", e)
                    })
                }
            }, e.prototype._setLocalDescription = function(e) {
                return this.options.useStereo && (e.sdp = a.sdpStereoHack(e.sdp)), this.instance.setLocalDescription(e)
            }, e.prototype._sdpReady = function() {
                l.isFunction(this.onSdpReadyTwice) && this.onSdpReadyTwice(this.instance.localDescription)
            }, e.prototype._retrieveLocalStream = function() {
                return r(this, void 0, void 0, function() {
                    return o(this, function(e) {
                        return u.streamIsValid(this.options.localStream) ? [2, this.options.localStream] : [2, a.getUserMedia(a.getMediaConstraints(this.options))]
                    })
                })
            }, e.prototype._isOffer = function() {
                return this.type === c.PeerType.Offer
            }, e.prototype._isAnswer = function() {
                return this.type === c.PeerType.Answer
            }, e.prototype._config = function() {
                var e = this.options.iceServers,
                    t = {
                        sdpSemantics: "plan-b",
                        bundlePolicy: "max-compat",
                        iceServers: void 0 === e ? [] : e
                    };
                return s.default.info("RTC config", t), t
            }, e.prototype._audioTracks = function() {
                if (!u.streamIsValid(this.options.localStream)) throw new Error("Invalid Local Stream");
                return this.options.localStream.getAudioTracks()
            }, e.prototype._videoTracks = function() {
                if (!u.streamIsValid(this.options.localStream)) throw new Error("Invalid Local Stream");
                return this.options.localStream.getVideoTracks()
            }, e.prototype._setTracks = function(e, t) {
                for (var n = 0; n < e.length; n++) switch (t) {
                    case !0:
                    case "on":
                        e[n].enabled = !0;
                        break;
                    case !1:
                    case "off":
                        e[n].enabled = !1;
                        break;
                    case "toggle":
                        e[n].enabled = !e[n].enabled
                }
            }, e
        }();
    t.default = d
}, function(e, t, n) {
    "use strict";
    var r;
    Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        function(e) {
            e.None = "none", e.Created = "created", e.Ringing = "ringing", e.Answered = "answered", e.Ending = "ending", e.Ended = "ended"
        }(r = t.CallState || (t.CallState = {})), t.CALL_STATES = Object.values(r), t.DEFAULT_CALL_TIMEOUT = 30,
        function(e) {
            e.Hangup = "hangup", e.Cancel = "cancel", e.Busy = "busy", e.NoAnswer = "noAnswer", e.Decline = "decline", e.Error = "error"
        }(t.DisconnectReason || (t.DisconnectReason = {})),
        function(e) {
            e.None = "none", e.Client = "client", e.Server = "server", e.Endpoint = "endpoint"
        }(t.DisconnectSource || (t.DisconnectSource = {})),
        function(e) {
            e.Phone = "phone", e.Sip = "sip", e.WebRTC = "webrtc"
        }(t.CallType || (t.CallType = {})),
        function(e) {
            e.Disconnected = "disconnected", e.Connecting = "connecting", e.Connected = "connected", e.Failed = "failed"
        }(t.CallConnectState || (t.CallConnectState = {})),
        function(e) {
            e.State = "calling.call.state", e.Receive = "calling.call.receive", e.Connect = "calling.call.connect", e.Record = "calling.call.record", e.Play = "calling.call.play", e.Collect = "calling.call.collect", e.Fax = "calling.call.fax"
        }(t.CallNotification || (t.CallNotification = {})),
        function(e) {
            e.Playing = "playing", e.Error = "error", e.Finished = "finished"
        }(t.CallPlayState || (t.CallPlayState = {})),
        function(e) {
            e.Page = "page", e.Error = "error", e.Finished = "finished"
        }(t.CallFaxState || (t.CallFaxState = {})),
        function(e) {
            e.Error = "error", e.NoInput = "no_input", e.NoMatch = "no_match", e.Digit = "digit", e.Speech = "speech"
        }(t.CallPromptState || (t.CallPromptState = {})),
        function(e) {
            e.Recording = "recording", e.NoInput = "no_input", e.Finished = "finished"
        }(t.CallRecordState || (t.CallRecordState = {}))
}, function(e, t, n) {
    "use strict";
    var r = c(n(101)),
        o = c(n(109)),
        i = c(n(118)),
        s = c(n(47)),
        a = c(n(52));

    function c(e) {
        return e && e.__esModule ? e : {
            default: e
        }
    }
    var u, l = (u = function(e, t) {
            return (u = a.default || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                })(e, t)
        }, function(e, t) {
            function n() {
                this.constructor = e
            }
            u(e, t), e.prototype = null === t ? (0, s.default)(t) : (n.prototype = t.prototype, new n)
        }),
        f = function(e, t, n, r) {
            return new(n || (n = i.default))(function(o, i) {
                function s(e) {
                    try {
                        c(r.next(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function a(e) {
                    try {
                        c(r.throw(e))
                    } catch (e) {
                        i(e)
                    }
                }

                function c(e) {
                    e.done ? o(e.value) : new n(function(t) {
                        t(e.value)
                    }).then(s, a)
                }
                c((r = r.apply(e, t || [])).next())
            })
        },
        d = function(e, t) {
            var n, i, s, a, c = {
                label: 0,
                sent: function() {
                    if (1 & s[0]) throw s[1];
                    return s[1]
                },
                trys: [],
                ops: []
            };
            return a = {
                next: u(0),
                throw: u(1),
                return: u(2)
            }, "function" == typeof o.default && (a[r.default] = function() {
                return this
            }), a;

            function u(r) {
                return function(o) {
                    return function(r) {
                        if (n) throw new TypeError("Generator is already executing.");
                        for (; c;) try {
                            if (n = 1, i && (s = 2 & r[0] ? i.return : r[0] ? i.throw || ((s = i.return) && s.call(i), 0) : i.next) && !(s = s.call(i, r[1])).done) return s;
                            switch (i = 0, s && (r = [2 & r[0], s.value]), r[0]) {
                                case 0:
                                case 1:
                                    s = r;
                                    break;
                                case 4:
                                    return c.label++, {
                                        value: r[1],
                                        done: !1
                                    };
                                case 5:
                                    c.label++, i = r[1], r = [0];
                                    continue;
                                case 7:
                                    r = c.ops.pop(), c.trys.pop();
                                    continue;
                                default:
                                    if (!(s = (s = c.trys).length > 0 && s[s.length - 1]) && (6 === r[0] || 2 === r[0])) {
                                        c = 0;
                                        continue
                                    }
                                    if (3 === r[0] && (!s || r[1] > s[0] && r[1] < s[3])) {
                                        c.label = r[1];
                                        break
                                    }
                                    if (6 === r[0] && c.label < s[1]) {
                                        c.label = s[1], s = r;
                                        break
                                    }
                                    if (s && c.label < s[2]) {
                                        c.label = s[2], c.ops.push(r);
                                        break
                                    }
                                    s[2] && c.ops.pop(), c.trys.pop();
                                    continue
                            }
                            r = t.call(e, c)
                        } catch (e) {
                            r = [6, e], i = 0
                        } finally {
                            n = s = 0
                        }
                        if (5 & r[0]) throw r[1];
                        return {
                            value: r[0] ? r[1] : void 0,
                            done: !0
                        }
                    }([r, o])
                }
            }
        },
        p = function(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        };
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var h = p(n(54)),
        v = n(26),
        y = p(n(43)),
        b = n(5),
        _ = n(8),
        g = n(25),
        m = p(n(57));
    t.VERTO_PROTOCOL = "verto-protocol";
    var w = function(e) {
        function n() {
            var n = null !== e && e.apply(this, arguments) || this;
            return n.relayProtocol = t.VERTO_PROTOCOL, n
        }
        return l(n, e), n.prototype.validateOptions = function() {
            var e = this.options,
                t = e.host,
                n = e.login,
                r = e.passwd,
                o = e.password;
            return Boolean(t) && Boolean(n && (r || o))
        }, n.prototype.newCall = function(e) {
            var t = e.destinationNumber;
            if (!(void 0 === t ? null : t)) throw new Error("Verto.newCall() error: destinationNumber is required.");
            var n = new y.default(this, e);
            return n.invite(), n
        }, n.prototype.broadcast = function(e) {
            return this.vertoBroadcast(e)
        }, n.prototype.subscribe = function(e) {
            return this.vertoSubscribe(e)
        }, n.prototype.unsubscribe = function(e) {
            return this.vertoUnsubscribe(e)
        }, n.prototype._onSocketOpen = function() {
            return f(this, void 0, void 0, function() {
                var e, t, n, r, o, i, s;
                return d(this, function(a) {
                    switch (a.label) {
                        case 0:
                            return e = this.options, t = e.login, n = e.password, r = e.passwd, o = e.userVariables, i = new v.Login(t, n || r, this.sessionid, o), [4, this.execute(i).catch(this._handleLoginError)];
                        case 1:
                            return (s = a.sent()) && (this._autoReconnect = !0, this.sessionid = s.sessid, g.localStorage.setItem(b.SESSION_ID, this.sessionid), _.trigger(b.SwEvent.Ready, this, this.uuid)), [2]
                    }
                })
            })
        }, n.prototype._onSocketMessage = function(e) {
            new m.default(this).handleMessage(e)
        }, n
    }(h.default);
    t.default = w
}, function(e, t, n) {
    e.exports = {
        default: n(102),
        __esModule: !0
    }
}, function(e, t, n) {
    n(59), n(63), e.exports = n(44).f("iterator")
}, function(e, t, n) {
    var r = n(36),
        o = n(35);
    e.exports = function(e) {
        return function(t, n) {
            var i, s, a = String(o(t)),
                c = r(n),
                u = a.length;
            return c < 0 || c >= u ? e ? "" : void 0 : (i = a.charCodeAt(c)) < 55296 || i > 56319 || c + 1 === u || (s = a.charCodeAt(c + 1)) < 56320 || s > 57343 ? e ? a.charAt(c) : i : e ? a.slice(c, c + 2) : s - 56320 + (i - 55296 << 10) + 65536
        }
    }
}, function(e, t, n) {
    "use strict";
    var r = n(33),
        o = n(23),
        i = n(30),
        s = {};
    n(10)(s, n(1)("iterator"), function() {
        return this
    }), e.exports = function(e, t, n) {
        e.prototype = r(s, {
            next: o(1, n)
        }), i(e, t + " Iterator")
    }
}, function(e, t, n) {
    var r = n(13),
        o = n(62),
        i = n(37)("IE_PROTO"),
        s = Object.prototype;
    e.exports = Object.getPrototypeOf || function(e) {
        return e = o(e), r(e, i) ? e[i] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? s : null
    }
}, function(e, t, n) {
    "use strict";
    var r = n(107),
        o = n(108),
        i = n(20),
        s = n(14);
    e.exports = n(60)(Array, "Array", function(e, t) {
        this._t = s(e), this._i = 0, this._k = t
    }, function() {
        var e = this._t,
            t = this._k,
            n = this._i++;
        return !e || n >= e.length ? (this._t = void 0, o(1)) : o(0, "keys" == t ? n : "values" == t ? e[n] : [n, e[n]])
    }, "values"), i.Arguments = i.Array, r("keys"), r("values"), r("entries")
}, function(e, t) {
    e.exports = function() {}
}, function(e, t) {
    e.exports = function(e, t) {
        return {
            value: t,
            done: !!e
        }
    }
}, function(e, t, n) {
    e.exports = {
        default: n(110),
        __esModule: !0
    }
}, function(e, t, n) {
    n(111), n(66), n(116), n(117), e.exports = n(2).Symbol
}, function(e, t, n) {
    "use strict";
    var r = n(0),
        o = n(13),
        i = n(12),
        s = n(9),
        a = n(61),
        c = n(112).KEY,
        u = n(22),
        l = n(38),
        f = n(30),
        d = n(24),
        p = n(1),
        h = n(44),
        v = n(45),
        y = n(113),
        b = n(114),
        _ = n(6),
        g = n(7),
        m = n(62),
        w = n(14),
        S = n(32),
        O = n(23),
        x = n(33),
        P = n(115),
        E = n(53),
        C = n(64),
        k = n(11),
        I = n(34),
        T = E.f,
        M = k.f,
        j = P.f,
        A = r.Symbol,
        N = r.JSON,
        D = N && N.stringify,
        R = p("_hidden"),
        L = p("toPrimitive"),
        U = {}.propertyIsEnumerable,
        V = l("symbol-registry"),
        F = l("symbols"),
        B = l("op-symbols"),
        H = Object.prototype,
        G = "function" == typeof A && !!C.f,
        q = r.QObject,
        J = !q || !q.prototype || !q.prototype.findChild,
        W = i && u(function() {
            return 7 != x(M({}, "a", {
                get: function() {
                    return M(this, "a", {
                        value: 7
                    }).a
                }
            })).a
        }) ? function(e, t, n) {
            var r = T(H, t);
            r && delete H[t], M(e, t, n), r && e !== H && M(H, t, r)
        } : M,
        Y = function(e) {
            var t = F[e] = x(A.prototype);
            return t._k = e, t
        },
        K = G && "symbol" == typeof A.iterator ? function(e) {
            return "symbol" == typeof e
        } : function(e) {
            return e instanceof A
        },
        z = function(e, t, n) {
            return e === H && z(B, t, n), _(e), t = S(t, !0), _(n), o(F, t) ? (n.enumerable ? (o(e, R) && e[R][t] && (e[R][t] = !1), n = x(n, {
                enumerable: O(0, !1)
            })) : (o(e, R) || M(e, R, O(1, {})), e[R][t] = !0), W(e, t, n)) : M(e, t, n)
        },
        Q = function(e, t) {
            _(e);
            for (var n, r = y(t = w(t)), o = 0, i = r.length; i > o;) z(e, n = r[o++], t[n]);
            return e
        },
        X = function(e) {
            var t = U.call(this, e = S(e, !0));
            return !(this === H && o(F, e) && !o(B, e)) && (!(t || !o(this, e) || !o(F, e) || o(this, R) && this[R][e]) || t)
        },
        Z = function(e, t) {
            if (e = w(e), t = S(t, !0), e !== H || !o(F, t) || o(B, t)) {
                var n = T(e, t);
                return !n || !o(F, t) || o(e, R) && e[R][t] || (n.enumerable = !0), n
            }
        },
        $ = function(e) {
            for (var t, n = j(w(e)), r = [], i = 0; n.length > i;) o(F, t = n[i++]) || t == R || t == c || r.push(t);
            return r
        },
        ee = function(e) {
            for (var t, n = e === H, r = j(n ? B : w(e)), i = [], s = 0; r.length > s;) !o(F, t = r[s++]) || n && !o(H, t) || i.push(F[t]);
            return i
        };
    G || (a((A = function() {
        if (this instanceof A) throw TypeError("Symbol is not a constructor!");
        var e = d(arguments.length > 0 ? arguments[0] : void 0),
            t = function(n) {
                this === H && t.call(B, n), o(this, R) && o(this[R], e) && (this[R][e] = !1), W(this, e, O(1, n))
            };
        return i && J && W(H, e, {
            configurable: !0,
            set: t
        }), Y(e)
    }).prototype, "toString", function() {
        return this._k
    }), E.f = Z, k.f = z, n(65).f = P.f = $, n(40).f = X, C.f = ee, i && !n(18) && a(H, "propertyIsEnumerable", X, !0), h.f = function(e) {
        return Y(p(e))
    }), s(s.G + s.W + s.F * !G, {
        Symbol: A
    });
    for (var te = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), ne = 0; te.length > ne;) p(te[ne++]);
    for (var re = I(p.store), oe = 0; re.length > oe;) v(re[oe++]);
    s(s.S + s.F * !G, "Symbol", {
        for: function(e) {
            return o(V, e += "") ? V[e] : V[e] = A(e)
        },
        keyFor: function(e) {
            if (!K(e)) throw TypeError(e + " is not a symbol!");
            for (var t in V)
                if (V[t] === e) return t
        },
        useSetter: function() {
            J = !0
        },
        useSimple: function() {
            J = !1
        }
    }), s(s.S + s.F * !G, "Object", {
        create: function(e, t) {
            return void 0 === t ? x(e) : Q(x(e), t)
        },
        defineProperty: z,
        defineProperties: Q,
        getOwnPropertyDescriptor: Z,
        getOwnPropertyNames: $,
        getOwnPropertySymbols: ee
    });
    var ie = u(function() {
        C.f(1)
    });
    s(s.S + s.F * ie, "Object", {
        getOwnPropertySymbols: function(e) {
            return C.f(m(e))
        }
    }), N && s(s.S + s.F * (!G || u(function() {
        var e = A();
        return "[null]" != D([e]) || "{}" != D({
            a: e
        }) || "{}" != D(Object(e))
    })), "JSON", {
        stringify: function(e) {
            for (var t, n, r = [e], o = 1; arguments.length > o;) r.push(arguments[o++]);
            if (n = t = r[1], (g(t) || void 0 !== e) && !K(e)) return b(t) || (t = function(e, t) {
                if ("function" == typeof n && (t = n.call(this, e, t)), !K(t)) return t
            }), r[1] = t, D.apply(N, r)
        }
    }), A.prototype[L] || n(10)(A.prototype, L, A.prototype.valueOf), f(A, "Symbol"), f(Math, "Math", !0), f(r.JSON, "JSON", !0)
}, function(e, t, n) {
    var r = n(24)("meta"),
        o = n(7),
        i = n(13),
        s = n(11).f,
        a = 0,
        c = Object.isExtensible || function() {
            return !0
        },
        u = !n(22)(function() {
            return c(Object.preventExtensions({}))
        }),
        l = function(e) {
            s(e, r, {
                value: {
                    i: "O" + ++a,
                    w: {}
                }
            })
        },
        f = e.exports = {
            KEY: r,
            NEED: !1,
            fastKey: function(e, t) {
                if (!o(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
                if (!i(e, r)) {
                    if (!c(e)) return "F";
                    if (!t) return "E";
                    l(e)
                }
                return e[r].i
            },
            getWeak: function(e, t) {
                if (!i(e, r)) {
                    if (!c(e)) return !0;
                    if (!t) return !1;
                    l(e)
                }
                return e[r].w
            },
            onFreeze: function(e) {
                return u && f.NEED && c(e) && !i(e, r) && l(e), e
            }
        }
}, function(e, t, n) {
    var r = n(34),
        o = n(64),
        i = n(40);
    e.exports = function(e) {
        var t = r(e),
            n = o.f;
        if (n)
            for (var s, a = n(e), c = i.f, u = 0; a.length > u;) c.call(e, s = a[u++]) && t.push(s);
        return t
    }
}, function(e, t, n) {
    var r = n(17);
    e.exports = Array.isArray || function(e) {
        return "Array" == r(e)
    }
}, function(e, t, n) {
    var r = n(14),
        o = n(65).f,
        i = {}.toString,
        s = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
    e.exports.f = function(e) {
        return s && "[object Window]" == i.call(e) ? function(e) {
            try {
                return o(e)
            } catch (e) {
                return s.slice()
            }
        }(e) : o(r(e))
    }
}, function(e, t, n) {
    n(45)("asyncIterator")
}, function(e, t, n) {
    n(45)("observable")
}, function(e, t, n) {
    e.exports = {
        default: n(119),
        __esModule: !0
    }
}, function(e, t, n) {
    n(66), n(59), n(63), n(120), n(132), n(133), e.exports = n(2).Promise
}, function(e, t, n) {
    "use strict";
    var r, o, i, s, a = n(18),
        c = n(0),
        u = n(16),
        l = n(67),
        f = n(9),
        d = n(7),
        p = n(21),
        h = n(121),
        v = n(122),
        y = n(68),
        b = n(69).set,
        _ = n(127)(),
        g = n(46),
        m = n(70),
        w = n(128),
        S = n(71),
        O = c.TypeError,
        x = c.process,
        P = x && x.versions,
        E = P && P.v8 || "",
        C = c.Promise,
        k = "process" == l(x),
        I = function() {},
        T = o = g.f,
        M = !! function() {
            try {
                var e = C.resolve(1),
                    t = (e.constructor = {})[n(1)("species")] = function(e) {
                        e(I, I)
                    };
                return (k || "function" == typeof PromiseRejectionEvent) && e.then(I) instanceof t && 0 !== E.indexOf("6.6") && -1 === w.indexOf("Chrome/66")
            } catch (e) {}
        }(),
        j = function(e) {
            var t;
            return !(!d(e) || "function" != typeof(t = e.then)) && t
        },
        A = function(e, t) {
            if (!e._n) {
                e._n = !0;
                var n = e._c;
                _(function() {
                    for (var r = e._v, o = 1 == e._s, i = 0, s = function(t) {
                            var n, i, s, a = o ? t.ok : t.fail,
                                c = t.resolve,
                                u = t.reject,
                                l = t.domain;
                            try {
                                a ? (o || (2 == e._h && R(e), e._h = 1), !0 === a ? n = r : (l && l.enter(), n = a(r), l && (l.exit(), s = !0)), n === t.promise ? u(O("Promise-chain cycle")) : (i = j(n)) ? i.call(n, c, u) : c(n)) : u(r)
                            } catch (e) {
                                l && !s && l.exit(), u(e)
                            }
                        }; n.length > i;) s(n[i++]);
                    e._c = [], e._n = !1, t && !e._h && N(e)
                })
            }
        },
        N = function(e) {
            b.call(c, function() {
                var t, n, r, o = e._v,
                    i = D(e);
                if (i && (t = m(function() {
                        k ? x.emit("unhandledRejection", o, e) : (n = c.onunhandledrejection) ? n({
                            promise: e,
                            reason: o
                        }) : (r = c.console) && r.error && r.error("Unhandled promise rejection", o)
                    }), e._h = k || D(e) ? 2 : 1), e._a = void 0, i && t.e) throw t.v
            })
        },
        D = function(e) {
            return 1 !== e._h && 0 === (e._a || e._c).length
        },
        R = function(e) {
            b.call(c, function() {
                var t;
                k ? x.emit("rejectionHandled", e) : (t = c.onrejectionhandled) && t({
                    promise: e,
                    reason: e._v
                })
            })
        },
        L = function(e) {
            var t = this;
            t._d || (t._d = !0, (t = t._w || t)._v = e, t._s = 2, t._a || (t._a = t._c.slice()), A(t, !0))
        },
        U = function(e) {
            var t, n = this;
            if (!n._d) {
                n._d = !0, n = n._w || n;
                try {
                    if (n === e) throw O("Promise can't be resolved itself");
                    (t = j(e)) ? _(function() {
                        var r = {
                            _w: n,
                            _d: !1
                        };
                        try {
                            t.call(e, u(U, r, 1), u(L, r, 1))
                        } catch (e) {
                            L.call(r, e)
                        }
                    }): (n._v = e, n._s = 1, A(n, !1))
                } catch (e) {
                    L.call({
                        _w: n,
                        _d: !1
                    }, e)
                }
            }
        };
    M || (C = function(e) {
        h(this, C, "Promise", "_h"), p(e), r.call(this);
        try {
            e(u(U, this, 1), u(L, this, 1))
        } catch (e) {
            L.call(this, e)
        }
    }, (r = function(e) {
        this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1
    }).prototype = n(129)(C.prototype, {
        then: function(e, t) {
            var n = T(y(this, C));
            return n.ok = "function" != typeof e || e, n.fail = "function" == typeof t && t, n.domain = k ? x.domain : void 0, this._c.push(n), this._a && this._a.push(n), this._s && A(this, !1), n.promise
        },
        catch: function(e) {
            return this.then(void 0, e)
        }
    }), i = function() {
        var e = new r;
        this.promise = e, this.resolve = u(U, e, 1), this.reject = u(L, e, 1)
    }, g.f = T = function(e) {
        return e === C || e === s ? new i(e) : o(e)
    }), f(f.G + f.W + f.F * !M, {
        Promise: C
    }), n(30)(C, "Promise"), n(130)("Promise"), s = n(2).Promise, f(f.S + f.F * !M, "Promise", {
        reject: function(e) {
            var t = T(this);
            return (0, t.reject)(e), t.promise
        }
    }), f(f.S + f.F * (a || !M), "Promise", {
        resolve: function(e) {
            return S(a && this === s ? C : this, e)
        }
    }), f(f.S + f.F * !(M && n(131)(function(e) {
        C.all(e).catch(I)
    })), "Promise", {
        all: function(e) {
            var t = this,
                n = T(t),
                r = n.resolve,
                o = n.reject,
                i = m(function() {
                    var n = [],
                        i = 0,
                        s = 1;
                    v(e, !1, function(e) {
                        var a = i++,
                            c = !1;
                        n.push(void 0), s++, t.resolve(e).then(function(e) {
                            c || (c = !0, n[a] = e, --s || r(n))
                        }, o)
                    }), --s || r(n)
                });
            return i.e && o(i.v), n.promise
        },
        race: function(e) {
            var t = this,
                n = T(t),
                r = n.reject,
                o = m(function() {
                    v(e, !1, function(e) {
                        t.resolve(e).then(n.resolve, r)
                    })
                });
            return o.e && r(o.v), n.promise
        }
    })
}, function(e, t) {
    e.exports = function(e, t, n, r) {
        if (!(e instanceof t) || void 0 !== r && r in e) throw TypeError(n + ": incorrect invocation!");
        return e
    }
}, function(e, t, n) {
    var r = n(16),
        o = n(123),
        i = n(124),
        s = n(6),
        a = n(50),
        c = n(125),
        u = {},
        l = {};
    (t = e.exports = function(e, t, n, f, d) {
        var p, h, v, y, b = d ? function() {
                return e
            } : c(e),
            _ = r(n, f, t ? 2 : 1),
            g = 0;
        if ("function" != typeof b) throw TypeError(e + " is not iterable!");
        if (i(b)) {
            for (p = a(e.length); p > g; g++)
                if ((y = t ? _(s(h = e[g])[0], h[1]) : _(e[g])) === u || y === l) return y
        } else
            for (v = b.call(e); !(h = v.next()).done;)
                if ((y = o(v, _, h.value, t)) === u || y === l) return y
    }).BREAK = u, t.RETURN = l
}, function(e, t, n) {
    var r = n(6);
    e.exports = function(e, t, n, o) {
        try {
            return o ? t(r(n)[0], n[1]) : t(n)
        } catch (t) {
            var i = e.return;
            throw void 0 !== i && r(i.call(e)), t
        }
    }
}, function(e, t, n) {
    var r = n(20),
        o = n(1)("iterator"),
        i = Array.prototype;
    e.exports = function(e) {
        return void 0 !== e && (r.Array === e || i[o] === e)
    }
}, function(e, t, n) {
    var r = n(67),
        o = n(1)("iterator"),
        i = n(20);
    e.exports = n(2).getIteratorMethod = function(e) {
        if (null != e) return e[o] || e["@@iterator"] || i[r(e)]
    }
}, function(e, t) {
    e.exports = function(e, t, n) {
        var r = void 0 === n;
        switch (t.length) {
            case 0:
                return r ? e() : e.call(n);
            case 1:
                return r ? e(t[0]) : e.call(n, t[0]);
            case 2:
                return r ? e(t[0], t[1]) : e.call(n, t[0], t[1]);
            case 3:
                return r ? e(t[0], t[1], t[2]) : e.call(n, t[0], t[1], t[2]);
            case 4:
                return r ? e(t[0], t[1], t[2], t[3]) : e.call(n, t[0], t[1], t[2], t[3])
        }
        return e.apply(n, t)
    }
}, function(e, t, n) {
    var r = n(0),
        o = n(69).set,
        i = r.MutationObserver || r.WebKitMutationObserver,
        s = r.process,
        a = r.Promise,
        c = "process" == n(17)(s);
    e.exports = function() {
        var e, t, n, u = function() {
            var r, o;
            for (c && (r = s.domain) && r.exit(); e;) {
                o = e.fn, e = e.next;
                try {
                    o()
                } catch (r) {
                    throw e ? n() : t = void 0, r
                }
            }
            t = void 0, r && r.enter()
        };
        if (c) n = function() {
            s.nextTick(u)
        };
        else if (!i || r.navigator && r.navigator.standalone)
            if (a && a.resolve) {
                var l = a.resolve(void 0);
                n = function() {
                    l.then(u)
                }
            } else n = function() {
                o.call(r, u)
            };
        else {
            var f = !0,
                d = document.createTextNode("");
            new i(u).observe(d, {
                characterData: !0
            }), n = function() {
                d.data = f = !f
            }
        }
        return function(r) {
            var o = {
                fn: r,
                next: void 0
            };
            t && (t.next = o), e || (e = o, n()), t = o
        }
    }
}, function(e, t, n) {
    var r = n(0).navigator;
    e.exports = r && r.userAgent || ""
}, function(e, t, n) {
    var r = n(10);
    e.exports = function(e, t, n) {
        for (var o in t) n && e[o] ? e[o] = t[o] : r(e, o, t[o]);
        return e
    }
}, function(e, t, n) {
    "use strict";
    var r = n(0),
        o = n(2),
        i = n(11),
        s = n(12),
        a = n(1)("species");
    e.exports = function(e) {
        var t = "function" == typeof o[e] ? o[e] : r[e];
        s && t && !t[a] && i.f(t, a, {
            configurable: !0,
            get: function() {
                return this
            }
        })
    }
}, function(e, t, n) {
    var r = n(1)("iterator"),
        o = !1;
    try {
        var i = [7][r]();
        i.return = function() {
            o = !0
        }, Array.from(i, function() {
            throw 2
        })
    } catch (e) {}
    e.exports = function(e, t) {
        if (!t && !o) return !1;
        var n = !1;
        try {
            var i = [7],
                s = i[r]();
            s.next = function() {
                return {
                    done: n = !0
                }
            }, i[r] = function() {
                return s
            }, e(i)
        } catch (e) {}
        return n
    }
}, function(e, t, n) {
    "use strict";
    var r = n(9),
        o = n(2),
        i = n(0),
        s = n(68),
        a = n(71);
    r(r.P + r.R, "Promise", {
        finally: function(e) {
            var t = s(this, o.Promise || i.Promise),
                n = "function" == typeof e;
            return this.then(n ? function(n) {
                return a(t, e()).then(function() {
                    return n
                })
            } : e, n ? function(n) {
                return a(t, e()).then(function() {
                    throw n
                })
            } : e)
        }
    })
}, function(e, t, n) {
    "use strict";
    var r = n(9),
        o = n(46),
        i = n(70);
    r(r.S, "Promise", {
        try: function(e) {
            var t = o.f(this),
                n = i(e);
            return (n.e ? t.reject : t.resolve)(n.v), t.promise
        }
    })
}]));